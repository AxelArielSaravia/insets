<!doctype html>
<html lang="en" data-theme="">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Axel Ariel Saravia">
        <meta name="creator" content="axarisar">
        <meta name="description" content="inSets music composition app generate music from miuxing audio files">
        <meta name="keywords" content="music, generative music, music composition, mixer, landscape music, experimental music, axarisar, Axel Ariel Saravia">

        <meta
            name="theme-color"
            media="(prefers-color-scheme: light)"
            content="#ede4e4"
        >
        <meta
            name="theme-color"
            media="(prefers-color-scheme: dark)"
            content="#3f3b3b"
        >

        <meta name="canonical" href="./">

        <title>inSets</title>
        
            <style>:root {

    --color-dark-base: #060606;
    --color-dark-bg: #121212;
    --color-dark-btn: #282525;
    --color-dark-hover: #3c3838;

    --color-light-base: #f9f9f9;
    --color-light-bg: #f6efef;
    --color-light-btn: #ece3e3;
    --color-light-hover: #e6d8df;

    --color-dark-pink1: #b7005e;
    --color-dark-pink2: #941a59;
    --color-dark-pink2-a: #941a5933;
    --color-dark-audio-select: #457672;
    --color-light-pink1: #ff99cd;
    --color-light-pink2: #ffc0e0;
    --color-light-pink2-a: #ffc0e033;
    --color-light-audio-select: #b7fff9;


    --color-base: var(--color-dark-base);
    --color-bg: var(--color-dark-bg);
    --color-text: var(--color-light-bg);
    --color-btn: var(--color-dark-btn);
    --color-hover: var(--color-dark-hover);
    --color-text-hover: var(--color-light-pink2);
    --color-highlight: var(--color-light-pink2-a);
    --color-select: var(--color-light-pink1);
    --color-audio-select: var(--color-light-audio-select);

    --scrollbar-bg: var(--color-btn) var(--color-bg);
    --scrollbar-base: var(--color-btn) var(--color-base);

    --fallback-fonts: Helvetica Neue, helvetica, arial, Hiragino Kaku Gothic ProN, Meiryo, MS Gothic;
    --font: var(--fallback-fonts, sans-serif);

    --font-size: 1rem;
    --font-size-buttons: 1rem;

    --visual-radius: 5px;

    --default-icon-size: 2.5ch;
    --summary-icon-size: 1.8ch;
    --checkbox-icon-size: 1.5ch;

    --gap: 1ch;
    --border-radius-bg: 1ch;

    accent-color: var(--color-text);
    color-scheme: dark;
}

 
@media (prefers-color-scheme: dark) {
    :root[data-theme=light] {
        --color-base: var(--color-light-base);
        --color-bg: var(--color-light-bg);
        --color-text: var(--color-dark-bg);
        --color-btn: var(--color-light-btn);
        --color-hover: var(--color-light-hover);
        --color-text-hover: var(--color-dark-pink2);
        --color-highlight: var(--color-dark-pink2-a);
        --color-select: var(--color-dark-pink1);
        --color-audio-select: var(--color-dark-audio-select);
        color-scheme: light;
    }
    :root:not([data-theme=light]) .theme-switcher .lucide-moon,
    :root[data-theme=light] .theme-switcher .lucide-sun {
        display: none;
    }
}

@media not (prefers-color-scheme: dark) {
    :root {
        --color-base: var(--color-light-base);
        --color-bg: var(--color-light-bg);
        --color-text: var(--color-dark-bg);
        --color-btn: var(--color-light-btn);
        --color-hover: var(--color-light-hover);
        --color-text-hover: var(--color-dark-pink2);
        --color-highlight: var(--color-dark-pink2-a);
        --color-select: var(--color-dark-pink1);
        --color-audio-select: var(--color-dark-audio-select);
        color-scheme: light;
    }
    :root[data-theme=dark] {
        --color-base: var(--color-dark-base);
        --color-bg: var(--color-dark-bg);
        --color-text: var(--color-light-bg);
        --color-btn: var(--color-dark-btn);
        --color-hover: var(--color-dark-hover);
        --color-select: var(--color-light-pink1);
        --color-text-hover: var(--color-light-pink2);
        --color-highlight: var(--color-light-pink2-a);
        --color-audio-select: var(--color-light-audio-select);
        color-scheme: dark;
    }
    :root:not([data-theme=dark]) .theme-switcher .lucide-sun,
    :root[data-theme=dark] .theme-switcher .lucide-moon {
        display: none;
    }
}
 

 
label,input, select, option {
    cursor: pointer;
}

input[type="range"] {
    height: 4px;
}
input[type="range"]:focus-visible {
    outline-offset: 1ch;
    border-radius: var(--visual-radius);
}

.button,
button {
    box-sizing: border-box;
    margin: 0;
    background: var(--color-btn);
    color: inherit;

    font-family: inherit;
    font-size: var(--font-size-buttons);
    font-weight: bold;

    cursor: pointer;

    border: none;
    border-radius: .5ch;

    position: relative;
    line-height: inherit;
}

.button::after,
button::after {
    content: "";
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
    inset: 0;
}

a {
    color: var(--color-text);
    border-radius: var(--visual-radius);
    font-size: var(--font-size);
}

:where(a, button, summary, input[type="range"], select):focus-visible {
    outline: 2px solid var(--color-select);
}

h1 {
    font-size: 1.5em;
}

h1, h2, h3, h4, p, span {
    margin: 0;
    font-weight: bold;
}

@media (hover: hover) and (pointer: fine){
    a:hover {
        color: var(--color-text-hover);
    }
    .button:hover,
    button:hover {
        color: var(--color-text-hover);
        background: var(--color-hover);
    }
    input[type="range"]:hover {
        accent-color: var(--color-select);
    }
}

@media not (prefers-reduced-motion) {
    .button,
    button,
    a,
    summary{
        transition: background 200ms ease-in-out,
                    color 200ms ease-in-out;
    }
}
 

 
body {
    margin: 0;
    padding: 0;

    display: flex;
    flex-direction: column;

    width: 100%;
    height: 100vh;

    font-family: var(--font);
    font-weight: normal;

    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    background-color:var(--color-base);
    color: var(--color-text);

    -webkit-tap-highlight-color: var(--color-highlight);
    user-select: none;
    touch-action: none;
}

body>main {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

body>main[data-app="0"] .app,
body>main[data-app="1"] .presentation {
    display: none
}

 

 
.icon {
    width: var(--default-icon-size);
    height: var(--default-icon-size);
}
.button-text {
    padding: .5ch 1ch;
}
.button-icon {
    display: flex;
    align-items: center;
    padding: .5ch;
    width: min-content;
}

.button-icon-text {
    display: flex;
    align-items: center;
    gap: 0.5ch;
    padding: .5ch 1ch;
}

.checkboxes {
    display:flex;
    flex-wrap: wrap;
    height1ch;
    border: none;
    margin: 0;
    padding: 0;
}

.checkbox, .b-file {
    position: relative;
}

.checkbox>span {
    display: flex;
    align-items: center;
    gap: 0.5ch;
}

.checkbox input:focus-visible+span {
    outline: 2px solid var(--color-select);
}

.checkbox input:not(:checked)+span {
    opacity: 0.6;
}

.checkbox .icon-checkbox {
    width: var(--checkbox-icon-size);
    height: var(--checkbox-icon-size);
}

.checkbox input:not(:checked)+span .icon {
    fill: none;
}

.scroll-buttons {
    display: flex;
    align-items: center;
    gap: 1ch;
    text-align: center;
}

.scroll-buttons button {
    display: flex;
    align-items: center;
}
.scroll-buttons p {
    width: 3ch;
}

.scroll-buttons button .icon {
    width: var(--checkbox-icon-size);
    height: var(--checkbox-icon-size);
}

.scroll-buttons button.left .icon {
    transform: rotate(-.25turn);
}

.scroll-buttons button.right .icon {
    transform: rotate(.25turn);
}

.range-number {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-width: 2cap;
}
.range-number button {
    width: 100%;
    justify-content: center;
}
.range-number .icon {
    width: var(--checkbox-icon-size);
    height: var(--checkbox-icon-size);
}

.range-number .down {
    transform: rotate(.5turn);
}

 

 
.presentation {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 1ch;
    background: var(--color-bg);
    padding: 1ch;
    overflow: auto;
    scrollbar-color: var(--scrollbar-bg);
}

.presentation header {
    display: flex;
    text-align: center;
    flex-direction: column;
    align-items: center;
}

.presentation header svg {
    width: min(20vh, 120px);
    height: min(20vh, 120px);
}

.presentation :where(a,p) {
    line-height: 2;
}


@media (scripting: none) {
    .presentation button {
        display: none;
    }
}
 

 
.drop-area {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    background: var(--color-bg);
    opacity: 0.5;
    z-index: 5;
}

.drop-area::after {
    content: "";
    display: block;
    position: absolute;
    inset: auto;
    width: 100%;
    height: 100%;
}
div.app {
    position: relative;
    overflow: hidden;
    flex-grow: 1;

    display: grid;
    grid-template: auto 1fr auto / minmax(0, 1fr) auto;

    padding: 1ch;
}

div.app .audio-container,
div.app .configuration .effects,
div.app .panel [name="title"]{
    box-sizing: border-box;
    overflow: auto;
    scroll-behavior: smooth;
}

div.app .audio-container,
div.app .configuration {
    scrollbar-color: var(--scrollbar-bg);
}
div.app .panel [name="title"]{
    scrollbar-color: var(--scrollbar-base);
}


div.app .menu {
    grid-row: 1;
    grid-column: 1;
}

div.app .menu li:first-of-type {
    flex-grow: 1;
}

div.app .menu .b-start span {
    width: 5ch;
    text-align: center;
}
div.app .menu .b-start[data-start="0"] .end {
    display: none;
}
div.app .menu .b-start[data-start="1"] .start {
    display: none;
}

div.app .menu input:focus-visible~span {
    outline: 2px solid var(--color-select);
}

div.app menu {
    margin: 0;
    padding: 0;
    display: flex;
    list-style: none;
    align-items: center;
    gap: 2ch;
}

div.app .configuration {
    grid-row: 1 / 3;
    grid-column: 2;
    background: var(--color-bg);
    border-radius: var(--border-radius-bg);

    display: flex;
    flex-direction: column;
    gap: var(--gap);
}

div.app .configuration menu li:last-of-type {
    flex-grow: 1;
    justify-items: flex-end;
}

div.app .configuration>h2 {
    font-size: var(--font-size);
    padding-block: var(--gap);
    padding-inline: calc(var(--gap) * 2) 0;
}

div.app .configuration .effects {
    display: flex;
    flex-direction: column;
    gap: var(--gap);
    padding: var(--gap);
}

div.app .configuration details {
    position: relative;
    border-radius: var(--border-radius-bg);
}
div.app .configuration details[open] {
    padding-bottom: 1ch;
}

div.app .configuration summary {
    display:flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--gap);
    cursor: pointer;

    list-style: none;

    border-radius: var(--visual-radius);
    padding: 1ch;
}


div.app .configuration details>:not(summary) {
    padding: 1ch;
}


div.app .configuration details > summary .icon {
    transform: rotate(270deg);
    width: var(--summary-icon-size);
    height: var(--summary-icon-size);
}

div.app .configuration details[open] > summary .icon {
    transform: rotate(180deg);
}

div.app .configuration .time .content {
    --font-size: 1.3rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--gap);
}

div.app .configuration .time .eg {
    font-size: var(--font-size);
    letter-spacing: 0.2ch;
    padding: 10px 0 0;
}

div.app .configuration .time [data-changed="0"] menu {
    display: none;
}

.time-input {
    display: flex;
    align-items: center;
}


.time-input p {
    font-size: var(--font-size);
}


div.app .configuration article .range{
    display: flex;
    align-items: center;
    gap: 1ch;
}
div.app .configuration article .range .title {
    width: 3ch;
}
div.app .configuration article .range input {
    flex-grow: 1;
}
div.app .configuration article .range .text {
    width: 9ch;
}

div.app .configuration h4 {
    padding-bottom: 1ch;
}

div.app .configuration :where(.general-buttons,.general-button) {
    display: flex;
    flex-wrap: wrap;
}

div.app .configuration .general-buttons {
    justify-content: space-between;
}

div.app .configuration .general-button {
    justify-content: flex-end;
}

div.app .configuration .sets .scroll-buttons {
    justify-content: center;
}

div.app .configuration .sets .max-elements {
    display: flex;
    align-items: center;
    gap: 1ch;
    padding: .7ch;
    border-radius: .5ch;
}
div.app .configuration [data-elements="1"] .max-elements svg {
    transform: rotate(.5turn);
}
div.app .configuration [data-elements="0"] .elements-radios {
    display: none;
}
div.app .configuration [data-elements="1"] .elements-radios {
    display: flex;
    flex-wrap: wrap;
    gap: 1ch;
}

div.app .configuration .radio {
    padding: .7ch;
    border: 1px solid var(--color-hover);
    border-radius: .5ch;
    width: 2ch;
    line-height: 1;
    text-align: center;
}
div.app .configuration .radio:has(input:checked) {
    color: var(--color-select);
    border-color: var(--color-select);
}

div.app .configuration .sets table {
    width: 100%;
    --font-size: 1.3rem;
}

div.app .configuration .sets table th {
    padding: 1ch 0;
}

div.app .panel[data-display="0"] {
    display: none;
}

div.app .panel {
    position: relative;
    grid-column: 1/3;
    grid-row: 3;

    display: grid;
    align-items: center;

    padding: var(--panel-gap);
    gap: var(--panel-gap);
}

div.app .panel>.title {
    --color-audio-text: inherit;
    color: var(--color-audio-text);
}

div.app .panel [name=volume] {
    display: flex;
    align-items: center;
    gap: .5ch;
}
div.app .panel [name=probability] {
    display: flex;
    gap: var(--gap);
}


div.app .panel [name=effects] {
    margin: 0;

    display: grid;
    grid-template: repeat(2, 1fr) / repeat(3, 1fr);
    gap: var(--gap);
}

div.app .panel [name=effects] span {
    text-wrap-mode: nowrap;
}


div.app .panel [name=playback] {
    box-sizing: border-box;
    padding: 0 2ch;
    width: 100%;
}
div.app .panel [name=playback] .current-text {
    text-align: center;
}

div.app .panel .time-text {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-bottom: var(--gap);
}
div.app .panel .range {
    position: relative;
}
div.app .panel .ranges input:focus-visible {
    outline-offset: .7ch;
}

div.app .panel .ranges .time-input {
    --thumb-size: 1.5ch;
    appearance: none;
    position: relative;
    z-index: 1;
    width: calc(100% + var(--thumb-size));
    margin: 0;
    background: transparent;
}

div.app .panel .ranges .start-time-input {
    transform: translate(calc(-1 * var(--thumb-size)), -2px);
}
div.app .panel .ranges .end-time-input {
    transform: translate(0, 2px);
}

div.app .panel .ranges .bars {
    position:relative;
    width: 100%;
    height: 1ch;
    overflow: hidden;
    background: var(--color-btn);
    border-radius: 1ch;
}


div.app .panel .ranges .bars div {
    height: inherit;
    width: 100%;
}
div.app .panel .ranges :where(
    .start-point,
    .end-point,
    .start-time,
    .end-time
) {
    position: absolute;
    inset: 0;
}
div.app .panel .ranges .current {
    --translate: 0%;
    background: var(--color-select);
    transform: translateX(calc(-100% + var(--translate)));
}
div.app .panel .ranges .start-point {
    --translate: 0%;
    background: var(--color-hover);
    transform: translateX(calc(-100% + var(--translate)));
}
div.app .panel .ranges .end-point {
    --translate: 100%;
    background: var(--color-hover);
    transform: translateX(var(--translate));
}
div.app .panel .ranges :where(.start-time, .end-time) {
    background: var(--color-text);
    opacity: 70%;
}
div.app .panel .ranges .start-time {
    --translate: 0%;
    transform: translateX(calc(-100% + var(--translate)));
}
div.app .panel .ranges .end-time {
    --translate: 100%;
    transform: translateX(var(--translate));
}

div.app .panel [name=playback]:has( .start-time-input:active) .time-text [name=start-time],
div.app .panel [name=playback]:has( .end-time-input:active) .time-text [name=end-time] {
    color: var(--color-select);
}
div.app .panel .ranges:has( .start-time-input:active) .start-time,
div.app .panel .ranges:has( .end-time-input:active) .end-time {
    background: var(--color-select)!important;
}

div.app .panel [name=controls] {
    display: flex;
    align-items: center;
    justify-content: center;
    align-items: flex-start;
    gap: calc(var(--gap) * 2);
}

div.app .panel [name=controls] :where(.prev, .next) {
    background: transparent;
}
div.app .panel [name=controls][data-scroll="0"] :where(.next, .prev) {
    display: none;
}

div.app .panel [name=close] {
    position: absolute;
    right: var(--panel-gap);
}

div.app .audio-container {
    grid-row: 2;
    grid-column: 1;

    position:relative;
    display: flex;
    flex-direction: column;
    gap: 1ch;

    font-size: var(--font-size);
    overflow: auto;
    background: var(--color-bg);
    padding: var(--gap);
}

div.app .audio-container:empty::before {
    content: "No Audio Files";
    font-size: 1em;
    font-weight: bold;
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

[data-playing="0"] :where(.lucide-pause, .icon-playing),
[data-playing="1"] :where(.lucide-play, .icon-selected) {
    display:none;
}

.audio {
    --color-audio-text: inherit;
    display: flex;
    align-items: center;
    gap: 1ch;
    font-size: var(--font-size);
    padding: 1ch;
    border-radius: 1ch;
    color: var(--color-audio-text);
}


.audio[data-selected="1"] {
    --color-audio-text: var(--color-select);
}
.audio .pin {
    font-size: var(--font-size-buttons);
    color: var(--color-audio-text);
}
.audio :where(.pin, .probability) {
    position: relative;
}
.audio :where(.pin, .probability)::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    inset: 0;
}

.audio[data-selected="0"] :where(.icon-selected, .icon-playing circle){
    fill: none;
}
.audio .title {
    position:relative;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    color: var(--color-audio-text);
}
.audio .title::after {
    content: "";
    position: absolute;
    height: 1lh;
    width: 3ch;
    right: 0;
    top: 0;
    background: linear-gradient(to left, var(--color-audio-bg), transparent);
}

 

 
@media (min-height: 380.1px) {
    @media (min-width: 1279.1px) {
        :root {
            font-size: .9vw;
        }
        div.app .panel {
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: auto;
        }
        div.app .panel .title {
            max-height: 4lh;
        }
    }
    @media (min-width: 920.1px) and (max-width: 1280px) {
        :root {
            font-size: 14px;
        }
        div.app .panel {
            grid-template-columns: 1fr auto;
            grid-template-rows: auto auto;
        }
        div.app .panel .title {
            max-height: 3lh;
            grid-row: 1;
            grid-column: 1/3;
            margin-right: calc(var(--panel-gap) * 3);
        }
        div.app .panel .module-playback {
            grid-row: 2;
            grid-column: 1;
        }
        div.app .panel .module-options {
            grid-row: 2;
            grid-column: 2;
        }
    }
    @media (min-width: 920.1px) {
        div.app menu {
            padding: var(--gap);
        }
        div.app .menu {
            background: var(--color-bg);
            border-start-start-radius: var(--border-radius-bg);
            border-start-end-radius: var(--border-radius-bg);
        }
        div.app .menu .checkbox input:checked+span {
            opacity: 0.6;
        }
        div.app .menu .checkbox input:checked+span svg {
            fill: none;
        }
        div.app .menu .checkbox input:not(:checked)+span {
            opacity: 1;
        }
        div.app .menu .checkbox input:not(:checked)+span svg {
            fill: currentColor;
        }
        div.app .configuration {
            margin-left: var(--gap);
            width: 24vw;
            min-width: 340px;

        }
        div.app .configuration[data-show="1"] {
            display: none;
        }

        div.app .audio-container {
            border-end-start-radius: var(--border-radius-bg);
            border-end-end-radius: var(--border-radius-bg);
        }
        div.app .panel {
            --panel-gap: 2ch;
            justify-content: space-between;
        }
        div.app .panel .module-playback {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
        }
        div.app .panel .module-options {
            display: grid;
            grid-template-columns: auto;
            grid-template-rows: repeat(3, auto);
            grid-auto-flow: column;
            gap: 1ch;
        }
        div.app .panel [name=probability] {
            align-self: end;
        }
        div.app .panel [name=volume] input {
            width: 50%;
        }
        div.app .panel [name=close] {
            top: var(--panel-gap);
        }
    }
}

@media (max-width: 920px), (max-height: 380px) {
    :root {
        font-size: 12px;
    }
    div.app {
        grid-template: auto auto 1fr / minmax(0,1fr)
    }

    div.app .menu {
        direction: rtl;
        padding: 0 0 var(--gap);
    }

    div.app .configuration {
        grid-row: 2/4;
        grid-column: 1;
        padding: var(--gap) 2vw;
        z-index: 2;
    }

    div.app .configuration h2 {
        display: none;
    }

    div.app .configuration[data-show="0"] {
        display: none;
    }
    div.app .configuration menu {
        padding: var(--gap);
    }
    div.app .configuration .effects {
        line-height: 2;
    }

    div.app .panel {
        --panel-gap: 1ch;
        grid-column: 1;
        grid-row: 2;
    }
    div.app .panel .title {
        max-height: 3lh;
        grid-row: 1;
    }
    div.app .panel .module-playback {
        grid-row: 3;
    }
    div.app .panel [name=playback] {
        padding-bottom: 1ch;
    }
    div.app .panel .module-options {
        grid-row: 2;
        display: grid;
        grid-template: auto auto / auto auto;
        grid-auto-flow: column;
        gap: 1ch;
    }
    div.app .panel [name=effects] {
        grid-row: 1/3;
    }

    div.app .panel [name=close] {
        bottom: var(--panel-gap);
        transform: rotate(.5turn);
    }
    div.app .audio-container {
        grid-row: 3;
        border-radius: var(--border-radius-bg);
    }
}

@media (max-width: 450px) {
    div.app .panel {
        padding: var(--gap) 0;
    }
    div.app .panel .module-options {
        grid-template: repeat(3, auto) / auto;
    }
    div.app .panel [name=effects] {
        grid-row: unset;
    }
    div.app menu button,
    div.app menu .button {
        flex-direction: column;
        min-width: 6ch;
        padding: .8ch 1ch;
    }
}

@media (max-height: 380px) and (min-width: 460px) {
    div.app {
        grid-template: auto 1fr / 1fr auto;
    }
    div.app .menu {
        grid-row: 1;
        grid-column: 1/3;
    }
    div.app .configuration {
        grid-row: 2;
        grid-column: 1/3;
        overflow: hidden;
    }
    div.app .audio-container {
        grid-row: 2;
        grid-column: 1;
        min-width: 150px;
    }
    div.app .panel {
        grid-row: 2;
        grid-column: 2;
        width: min(50vw, 300px);
        padding: 0 0 0 var(--gap);
    }
    div.app .panel .module-options {
        display: flex;
        flex-direction: column;
    }
    div.app .panel [name=close] {
        transform: rotate(-.25turn);
    }
}

@media (hover: hover) and (pointer: fine) {
    div.app .configuration summary:hover {
        background: var(--color-hover);
        color: var(--color-text-hover);
    }

    div.app .configuration details[open] {
        background: var(--color-btn);
    }

    div.app .configuration .sets .max-elements:hover {
        background: var(--color-hover);
    }
    div.app .configuration .radio:hover {
        color: var(--color-text-hover);
        background: var(--color-hover);
    }

    div.app .panel .ranges:has( .start-time-input:hover) .start-time,
    div.app .panel .ranges:has( .end-time-input:hover) .end-time {
        background: var(--color-text-hover)
    }

    div.app .panel .ranges .time-input:hover::-webkit-slider-thumb {
        background: var(--color-text-hover);
    }

    div.app .panel .ranges .time-input:hover::-moz-range-thumb {
        background: var(--color-text-hover);
    }

    div.app .panel [name=controls] :where(.prev, .next):hover {
        background: var(--color-hover);
    }

    .audio {
        --color-audio-bg: var(--color-bg);
    }
    .audio:hover {
        --color-audio-bg: var(--color-btn);
        --color-audio-text: var(--color-text-hover);
        background: var(--color-btn);
        cursor: pointer;
    }

    .audio:hover .pin,
    .audio:not(:hover) [name=play] {
        display:none;
    }
    .audio:not(:hover) [name=remove] {
        visibility: hidden;
    }

    .audio:hover .title {
        text-decoration: underline;
    }
}

@media not ((hover:hover) and (pointer:fine)) {
    .audio {
        --color-audio-bg: var(--color-btn);
        background: var(--color-btn);
    }

    div.app .configuration details {
        background: var(--color-btn);
    }
}

@media not (prefers-reduced-motion) {
    div.app .configuration details > summary svg {
        transition: transform .2s linear;
    }
}
 

 
@supports (height: 1dvh) or (height: 1svh)  {
    body {
        height: 100svh;
        height: 100dvh;
    }

    div.app>.content {
        flex-direction: column-reverse;
    }


    @media (max-width: 920px) {
        div.app {
            grid-template: 1fr auto auto / auto;
        }
        div.app .menu {
            grid-row: 3;
            padding: var(--gap) 0 0;
        }
        div.app .configuration {
            grid-row: 1 / 3;
        }

        div.app .audio-container {
            grid-row: 1;
        }
        div.app .panel [name=close] {
            transform: rotate(0);
        }
    }
    @media (max-height: 380px) and (min-width: 460px) {
        div.app {
            grid-template: 1fr auto / 1fr auto;
        }
        div.app .menu {
            grid-row: 2;

        }
        div.app .configuration {
            grid-row: 1;
        }
        div.app .audio-container {
            grid-row: 1;
        }
        div.app .panel {
            grid-row: 1;
        }
        div.app .panel [name=close] {
            transform: rotate(-.25turn);
        }
    }
}
 

 
.hidde-interactive {
    position: absolute;
    width: 1px;
    height: 1px;
    opacity: 0;
}

.sr-only {
    clip: rect(0 0 0 0); 
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap; 
    width: 1px;
}

[data-display="0"],
[data-css-hidden] {
    display: none !important;
}
 
</style>
            <script type="module">"use strict";

const AUDIOELEMENTS_MAX = 128;

const DEFAULT_AREALLDISABLE = false;
const DEFAULT_DELAY_FEEDBACKMAX = 16;
const DEFAULT_DELAY_FEEDBACKMIN = 4;
const DEFAULT_DELAY_TIMEMAX = 39;
const DEFAULT_DELAY_TIMEMIN = 3;
const DEFAULT_FADEIN = 2;
const DEFAULT_FADEOUT = 5;
const DEFAULT_FILTER_FREQMAX = 240;
const DEFAULT_FILTER_FREQMIN = 40;
const DEFAULT_FILTER_QMAX = 36;
const DEFAULT_FILTER_QMIN = 0;
const DEFAULT_FILTER_BANDPASS = true;
const DEFAULT_FILTER_HIGHPASS = true;
const DEFAULT_FILTER_LOWPASS = true;
const DEFAULT_FILTER_NOTCH = true;
const DEFAULT_PANNER_XMAX = 80;
const DEFAULT_PANNER_XMIN = 20;
const DEFAULT_PANNER_YMAX = 80;
const DEFAULT_PANNER_YMIN = 20;
const DEFAULT_PANNER_ZMAX = 50;
const DEFAULT_PANNER_ZMIN = 0;
const DEFAULT_PBRATE_MAX = 15;
const DEFAULT_PBRATE_MIN = 5;

const DEFAULT_TIMEINTERVAL_MAX = 50;
const DEFAULT_TIMEINTERVAL_MIN = 8;


const DEFAULT_VOLUME = 10;

const LIMIT_MIN = 0;
const LIMIT_DELAY_FEEDBACKMAX = 17;
const LIMIT_DELAY_TIMEMAX = 49;
const LIMIT_FADES_MAX = 8;
const LIMIT_FILTER_FREQMAX = 248;
const LIMIT_FILTER_QMAX = 36;
const LIMIT_FILTER_EFFECTS = 4;
const LIMIT_PANNER_MAX = 100;
const LIMIT_PANNER_ZMAX = 50;
const LIMIT_PBRATE_MAX = 20;

const LIMIT_TIMEINTERVAL_MAX = 18000;
const LIMIT_TIMEINTERVAL_MIN = 5;
const LIMIT_VOLUME_MAX = 15;    
const LIMIT_VOLUME_MIN = 1;     

const AUDIO_EVENT_MAX_VALUE = 120;
const AUIDIO_EVENT_MIN_VALUE = 1;

const EVENT_ONCE = {once: true};
const EVENT_CO = {capture: true, once: true};

const FREE_TIME = 5000; 

const CARDINAL_MAX = 15;
const EVENTS_MAX_VALUE = 80;
const EVENTS_MIN_VALUE = 0;

const SetEvents = {
    cap: CARDINAL_MAX + 1,
    max: CARDINAL_MAX,
    len: 1,
    buf: (function () {
        var a = new Uint8Array(CARDINAL_MAX + 1);
        a[0] = 1;
        return a;
    }()),
    sum: 1,
    zeros: 0
};

const STARTEDID_MAX = Number.MAX_SAFE_INTEGER;
let context = null;
let Started = false;
let StartedId = 0;

const startedIdNext = function () {
    if (StartedId === STARTEDID_MAX) {
        StartedId = 0;
    } else {
        StartedId += 1;
    }
    return StartedId;
};

const AlertAnimation = {
    keyframes: [{color: "red"}],
    timing: {
        duration: 300,
        iterations: 3,
    }
};
const SelectAnimation = {
    keyframes: [{"--color-audio-text": "var(--color-audio-select)"}],
    timing: {
        duration: 800,
        iterations: 1,
        delay: 0
    }
};
let reduceMotion = false;

const Reader = new FileReader();

const STORAGE_CREP_DISABLE = "inset.crep.disabled";
const STORAGE_CRSP_DISABLE = "inset.crsp.disabled";
const STORAGE_DELAY_DISABLE = "inset.d.disabled";
const STORAGE_DELAY_TIMEMAX = "inset.d.tmax";
const STORAGE_DELAY_TIMEMIN = "inset.d.tmin";
const STORAGE_DELAY_FEEDBACKMAX = "inset.d.fmax";
const STORAGE_DELAY_FEEDBACKMIN = "inset.d.fmin";
const STORAGE_FADEOUT = "inset.fout";
const STORAGE_FADEIN = "inset.fin";
const STORAGE_FILTER_DISABLE = "inset.f.disabled";
const STORAGE_FILTER_FREQMAX = "inset.f.fmax";
const STORAGE_FILTER_FREQMIN = "inset.f.fmin";
const STORAGE_FILTER_QMAX = "inset.f.qmax";
const STORAGE_FILTER_QMIN = "inset.f.qmin";
const STORAGE_FILTER_BANDPASS = "inset.f.bp";
const STORAGE_FILTER_HIGHPASS = "inset.f.hp";
const STORAGE_FILTER_LOWPASS = "inset.f.lp";
const STORAGE_FILTER_NOTCH = "inset.f.nt";
const STORAGE_PANNER_DISABLE = "inset.p.disabled";
const STORAGE_PANNER_XMAX = "inset.p.xmax";
const STORAGE_PANNER_XMIN = "inset.p.xmin";
const STORAGE_PANNER_YMAX = "inset.p.ymax";
const STORAGE_PANNER_YMIN = "inset.p.ymin";
const STORAGE_PANNER_ZMAX = "inset.p.zmax";
const STORAGE_PANNER_ZMIN = "inset.p.zmin";
const STORAGE_PBRATE_DISABLE = "inset.pbr.disabled";
const STORAGE_PBRATE_MAX = "inset.pbr.max";
const STORAGE_PBRATE_MIN = "inset.pbr.min";
const STORAGE_THEME = "inset.theme";
const STORAGE_TIME_MAX = "inset.t.max";
const STORAGE_TIME_MIN = "inset.t.min";
const STORAGE_VERSION = "inset.version";

const StorageKeys = [
    STORAGE_CREP_DISABLE,
    STORAGE_CRSP_DISABLE,
    STORAGE_DELAY_DISABLE,
    STORAGE_DELAY_TIMEMAX,
    STORAGE_DELAY_TIMEMIN,
    STORAGE_DELAY_FEEDBACKMAX,
    STORAGE_DELAY_FEEDBACKMIN,
    STORAGE_FADEOUT,
    STORAGE_FADEIN,
    STORAGE_FILTER_DISABLE,
    STORAGE_FILTER_FREQMAX,
    STORAGE_FILTER_FREQMIN,
    STORAGE_FILTER_QMAX,
    STORAGE_FILTER_QMIN,
    STORAGE_FILTER_BANDPASS,
    STORAGE_FILTER_HIGHPASS,
    STORAGE_FILTER_LOWPASS,
    STORAGE_FILTER_NOTCH,
    STORAGE_PANNER_DISABLE,
    STORAGE_PANNER_XMAX,
    STORAGE_PANNER_XMIN,
    STORAGE_PANNER_YMAX,
    STORAGE_PANNER_YMIN,
    STORAGE_PANNER_ZMAX,
    STORAGE_PANNER_ZMIN,
    STORAGE_PBRATE_DISABLE,
    STORAGE_PBRATE_MAX,
    STORAGE_PBRATE_MIN,
    STORAGE_THEME,
    STORAGE_TIME_MAX,
    STORAGE_TIME_MIN,
    STORAGE_VERSION
];

let DelayAreAllDisable = DEFAULT_AREALLDISABLE;
let DelayTimemax = DEFAULT_DELAY_TIMEMAX;
let DelayTimemin = DEFAULT_DELAY_TIMEMIN;
let DelayFeedbackmax = DEFAULT_DELAY_FEEDBACKMAX;
let DelayFeedbackmin = DEFAULT_DELAY_FEEDBACKMIN;
let FadeIn = DEFAULT_FADEIN;
let FadeOut = DEFAULT_FADEOUT;
let FilterAreAllDisable = DEFAULT_AREALLDISABLE;
let FilterFreqmax = DEFAULT_FILTER_FREQMAX;
let FilterFreqmin = DEFAULT_FILTER_FREQMIN;
let FilterQmax = DEFAULT_FILTER_QMAX;
let FilterQmin = DEFAULT_FILTER_QMIN;
let FilterBandpass = DEFAULT_FILTER_BANDPASS;
let FilterHighpass = DEFAULT_FILTER_HIGHPASS;
let FilterLowpass = DEFAULT_FILTER_LOWPASS;
let FilterNotch = DEFAULT_FILTER_NOTCH;
const FilterTypes = ["highpass","lowpass","bandpass","notch"];
let PannerAreAllDisable = DEFAULT_AREALLDISABLE;
let PannerXmax = DEFAULT_PANNER_XMAX;
let PannerXmin = DEFAULT_PANNER_XMIN;
let PannerYmax = DEFAULT_PANNER_YMAX;
let PannerYmin = DEFAULT_PANNER_YMIN;
let PannerZmax = DEFAULT_PANNER_ZMAX;
let PannerZmin = DEFAULT_PANNER_ZMIN;
let PbRateAreAllDisable = DEFAULT_AREALLDISABLE;
let PbRatemax = DEFAULT_PBRATE_MAX;
let PbRatemin = DEFAULT_PBRATE_MIN;
let CutREPAreAllDisable = DEFAULT_AREALLDISABLE;
let CutRSPAreAllDisable = DEFAULT_AREALLDISABLE;


let TimeIntervalmax = DEFAULT_TIMEINTERVAL_MAX;
let TimeIntervalmin = DEFAULT_TIMEINTERVAL_MIN;
let TimeTemporalmax = DEFAULT_TIMEINTERVAL_MAX;
let TimeTemporalmin = DEFAULT_TIMEINTERVAL_MIN;

let AudioSelectedPrevIdx = -1;
let AudioSelectedIdx = -1;

const SelectedAudios = {
    cap: AUDIOELEMENTS_MAX,
    len: 0,
    buf: new Uint8Array(AUDIOELEMENTS_MAX),
    all: false,
};

let AudioEventsSum = 0;

const ZombieList = {
     
    buf: [],
    len: 0,
    seen: 0,
    available() {
        return (ZombieList.len > 0 && ZombieList.len > ZombieList.seen);
    },
     
    push(audio) {
        ZombieList.buf.push(audio);
        ZombieList.len += 1;
    },
     
    revive(i) {
        if (ZombieList.len === 0) {
            return;
        }
        assert(0 <= i && i < ZombieList.len, "ERROR: index out of range");

        let z = ZombieList.buf[i];
        if (i < ZombieList.len-1) {
            ZombieList.buf.copyWithin(i, i+1, ZombieList.len);
        }

        ZombieList.buf.length -= 1;
        ZombieList.len -= 1;
        return z;
    },
    indexOf(html) {
        if (ZombieList.len === 0) {
            return -1;
        }
        for (let i = 0; i < ZombieList.len; i += 1) {
            if (ZombieList.buf[i].html === html) {
                return i;
            }
        }
        return -1;
    },
    see() {
        if (ZombieList.len === 0 || ZombieList.len === ZombieList.seen) {
            return;
        }
        const z = ZombieList.buf[ZombieList.seen];
        ZombieList.seen += 1;
        return z;
    },
     
    free() {
        if (ZombieList.len > 0) {
            ZombieList.buf.length = 0;
            ZombieList.len = 0;
        }
    }
}

const AudioList = {
     
    buf: [],
    len: 0,
     
    push(audio) {
        AudioList.buf.push(audio);
        AudioList.len += 1;
    },
     
    get(i) {
        if (i < 0 || i >= AudioList.len) {
            return undefined;
        }
        return AudioList.buf[i];
    },
     
    cleanAudio(audio) {
        
        audio.events = 1;
        audio.playing = false;
        audio.volume = DEFAULT_VOLUME;
        audio.startPoint = 0;
        audio.startTime = 0;
        audio.delayDisabled = DelayAreAllDisable;
        audio.filterDisabled = FilterAreAllDisable;
        audio.pannerDisabled = PannerAreAllDisable;
        audio.pbrateDisabled = PbRateAreAllDisable;
        audio.rspDisabled = CutRSPAreAllDisable;
        audio.repDisabled = CutREPAreAllDisable;
        audio.pbrate = 1;

        
        audio.html.removeEventListener("timeupdate", AudioOntimeupdate);
        audio.html.removeEventListener("ended", AudioOnended);
        URL.revokeObjectURL(audio.html.src);
    },
     
    makeZombie(i) {
        assert(0 <= i && i < AudioList.len, "ERROR: index out of range");

        let audio = AudioList.buf[i];
        if (i < AudioList.len-1) {
            const buf = AudioList.buf;
            for (let j = i; j < AudioList.len-1; j += 1) {
                buf[j] = buf[j+1];
                buf[j].html._index = j;
            }
            
        }
        AudioList.buf.length -= 1;
        AudioList.len -= 1;

        audio.html._zombie = true;

        AudioList.cleanAudio(audio);
        ZombieList.push(audio);
        return true;
    }
};

let timeoutFree = undefined;
const timeoutFreeFn = function () {
    if (timeoutFree !== undefined) {
        ZombieList.free();
        HtmlAudioZombies.replaceChildren();

        timeoutFree = undefined;
    }
};





const assert = function (expression, msg) {
    
    
    if (!expression) {
        throw Error(msg);
    }
};



const random = function (min, max) {
    return Math.floor(Math.random() * (max - min + 1) + min);
};



const HtmlAudioZombies = document.createDocumentFragment();

const HtmlAudioTemplate = document.createElement("audio");
const HtmlAudioElementTemplate = (function () {
     
    const t = document.getElementById("t-audio-element");
    assert(t !== null, "#t-audio-element is not found");
    return t.content;
}());

const HtmlApp = document.getElementById("app");
assert(HtmlApp !== null, "#app is not found");

const HtmlAppContainer = document.getElementById("app-container");
assert(HtmlAppContainer !== null, "#app-container is not found");

const HtmlAppConfig = document.getElementById("app-config");
assert(HtmlAppConfig !== null, "#app-config is not found");

const HtmlAppDrop = document.getElementById("app-drop");
assert(HtmlAppDrop !== null, "#app-drop is not found");

const HtmlAppMenu = document.getElementById("app-menu");
assert(HtmlAppMenu !== null, "#app-menu is not found");

const HtmlAppPanel = document.getElementById("app-panel");
assert(HtmlAppPanel !== null, "#app-panel is not found");

const HtmlPTitle = document.getElementById("p-title");
assert(HtmlPTitle !== null, "#p-title is not found");

const HtmlPVolume = document.getElementById("p-volume");
assert(HtmlPVolume !== null, "#p-volume is not found");

const HtmlPVolumeInput = document.getElementById("p-volume-input");
assert(HtmlPVolumeInput !== null, "#p-volume-input is not found");

const HtmlPVolumeText = document.getElementById("p-volume-text");
assert(HtmlPVolumeText !== null, "#p-volume-text is not found");

const HtmlPProbValue = document.getElementById("p-probability-value");
assert(HtmlPProbValue !== null, "#p-probability-value is not found");

const HtmlPProbText = document.getElementById("p-probability-text");
assert(HtmlPProbText !== null, "#p-probability-text is not found");

const HtmlPEffects = document.getElementById("p-effects");
assert(HtmlPEffects !== null, "#p-effects is not found");

const HtmlPStartTimeText = document.getElementById("p-start-time-text");
assert(HtmlPStartTimeText !== null, "#p-start-time-text is not found");

const HtmlPStartTimeInput = document.getElementById("p-start-time-input");
assert(HtmlPStartTimeInput !== null, "#p-start-time-input is not found");

const HtmlPStartTimeBar = document.getElementById("p-start-time-bar");
assert(HtmlPStartTimeBar !== null, "#p-start-time-bar is not found");

const HtmlPEndTimeText = document.getElementById("p-end-time-text");
assert(HtmlPEndTimeText !== null, "#p-end-time-text is not found");

const HtmlPEndTimeInput = document.getElementById("p-end-time-input");
assert(HtmlPEndTimeInput !== null, "#p-end-time-input is not found");

const HtmlPEndTimeBar = document.getElementById("p-end-time-bar");
assert(HtmlPEndTimeBar !== null, "#p-end-time-bar is not found");

const HtmlPCurrentBar = document.getElementById("p-current-bar");
assert(HtmlPCurrentBar !== null, "#p-current-bar is not found");

const HtmlPCurrentText = document.getElementById("p-current-text");
assert(HtmlPCurrentText !== null, "#p-current-text is not found");

const HtmlPStartPointBar = document.getElementById("p-start-point-bar");
assert(HtmlPStartPointBar !== null, "#p-start-point-bar is not found");

const HtmlPEndPointBar = document.getElementById("p-end-point-bar");
assert(HtmlPEndPointBar !== null, "#p-end-point-bar is not found");

const HtmlPControls = document.getElementById("p-controls");
assert(HtmlPControls !== null, "#p-controls is not found");

const HtmlCSetDetails = document.getElementById("c-set-details");
assert(HtmlCSetDetails !== null, "#c-set-details is not found");

const HtmlCMaxElements = document.getElementById("c-max-elements");
assert(HtmlCMaxElements !== null, "#c-max-elements is not found");

const HtmlCSetRadios = document.getElementById("c-set-radios");
assert(HtmlCSetRadios !== null, "#c-set-radios is not found");

const HtmlCSets = document.getElementById("c-sets");
assert(HtmlCSets !== null, "#c-sets is not found");

const HtmlCTimemin = document.getElementById("c-time-min");
assert(HtmlCTimemin !== null, "#c-time-min is not found");
const HtmlCTimeminMM = HtmlCTimemin.children["mm"].children["value"];
const HtmlCTimeminSS = HtmlCTimemin.children["ss"].children["value"];
const HtmlCTimeminMS = HtmlCTimemin.children["ms"].children["value"];

const HtmlCTimeContainer = HtmlCTimemin.parentElement.parentElement;
assert(HtmlCTimeContainer !== null, "HtmlCTimeContainer is not found");

const HtmlCTimemax = document.getElementById("c-time-max");
assert(HtmlCTimemax !== null, "#c-time-max is not found");
const HtmlCTimemaxMM = HtmlCTimemax.children["mm"].children["value"];
const HtmlCTimemaxSS = HtmlCTimemax.children["ss"].children["value"];
const HtmlCTimemaxMS = HtmlCTimemax.children["ms"].children["value"];

const HtmlCFadein = document.getElementById("c-fadein");
assert(HtmlCFadein !== null, "#c-fadein is not found");

const HtmlCFadeout = document.getElementById("c-fadeout");
assert(HtmlCFadeout !== null, "#c-fadeout is not found");

const HtmlCDelayDA = document.getElementById("c-delay-da");
assert(HtmlCDelayDA !== null, "#c-delay-da is not found");

const HtmlCDelayTimemin = document.getElementById("c-delay-timemin");
assert(HtmlCDelayTimemin !== null, "#c-delay-timemin is not found");

const HtmlCDelayTimemax = document.getElementById("c-delay-timemax");
assert(HtmlCDelayTimemax !== null, "#c-delay-timemax is not found");

const HtmlCDelayFeedbackmin = document.getElementById("c-delay-feedbackmin");
assert(HtmlCDelayFeedbackmin !== null, "#c-delay-feedbackmin is not found");

const HtmlCDelayFeedbackmax = document.getElementById("c-delay-feedbackmax");
assert(HtmlCDelayFeedbackmax !== null, "#c-delay-feedbackmax is not found");

const HtmlCFilterDA = document.getElementById("c-filter-da");
assert(HtmlCFilterDA !== null, "#c-filter-da is not found");

const HtmlCFilterFreqmin = document.getElementById("c-filter-freqmin");
assert(HtmlCFilterFreqmin !== null, "#c-filter-freqmin is not found");

const HtmlCFilterFreqmax = document.getElementById("c-filter-freqmax");
assert(HtmlCFilterFreqmax !== null, "#c-filter-freqmax is not found");

const HtmlCFilterQmin = document.getElementById("c-filter-qmin");
assert(HtmlCFilterQmin !== null, "#c-filter-qmin is not found");

const HtmlCFilterQmax = document.getElementById("c-filter-qmax");
assert(HtmlCFilterQmax !== null, "#c-filter-qmax is not found");

const HtmlCFilterEffects = document.getElementById("c-filter-effects");
assert(HtmlCFilterEffects !== null, "#c-filter-effects is not found");

const HtmlCPannerDA = document.getElementById("c-panner-da");
assert(HtmlCPannerDA !== null, "#c-panner-da is not found");

const HtmlCPannerXmin = document.getElementById("c-panner-xmin");
assert(HtmlCPannerXmin !== null, "#c-panner-xmin is not found");

const HtmlCPannerXmax = document.getElementById("c-panner-xmax");
assert(HtmlCPannerXmax !== null, "#c-panner-xmax is not found");

const HtmlCPannerYmin = document.getElementById("c-panner-ymin");
assert(HtmlCPannerYmin !== null, "#c-panner-ymin is not found");

const HtmlCPannerYmax = document.getElementById("c-panner-ymax");
assert(HtmlCPannerYmax !== null, "#c-panner-ymax is not found");

const HtmlCPannerZmin = document.getElementById("c-panner-zmin");
assert(HtmlCPannerZmin !== null, "#c-panner-zmin is not found");

const HtmlCPannerZmax = document.getElementById("c-panner-zmax");
assert(HtmlCPannerZmax !== null, "#c-panner-zmax is not found");

const HtmlCPbrateDA = document.getElementById("c-pbrate-da");
assert(HtmlCPbrateDA !== null, "#c-pbrate-da is not found");

const HtmlCPbrateMin = document.getElementById("c-pbrate-min");
assert(HtmlCPbrateMin !== null, "#c-pbrate-min is not found");

const HtmlCPbrateMax = document.getElementById("c-pbrate-max");
assert(HtmlCPbrateMax !== null, "#c-pbrate-max is not found");

const HtmlCRSPDA = document.getElementById("c-rsp-da");
assert(HtmlCRSPDA !== null, "#c-rsp-da is not found");

const HtmlCREPDA = document.getElementById("c-rep-da");
assert(HtmlCREPDA !== null, "#c-rep-da is not found");

const defaultSets = function () {
    for (let i = 1; i < SetEvents.len; i += 1) {
        const HtmlSet = HtmlCSets.children[i];
        HtmlSet.setAttribute("data-display", "0"); 
    }
    SetEvents.zeros = 0;
    SetEvents.sum = 1;
    SetEvents.len = 1;
};





const getFilterFreq = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_FILTER_FREQMAX,
        "filter frequency out of range"
    );
    if (x < 60) {
        x = x + 40;
    } else if (x < 150) {
        x = (x - 50) * 10;
    } else if (x < 240) {
        x = (x - 140) * 100;
    } else {
        x = (x - 230) * 1000;
    }
    return x;
};



const getFilterQ = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_FILTER_QMAX,
        "filter q out of range"
    );
    if (x < 18) {
        x = (x + 2) / 20;
    } else if (x < 28) {
        x = (x - 8) / 10;
    } else {
        x = x - 26;
    }
    return x;
};



const getPlaybackRate = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_PBRATE_MAX,
        "playback rate out of range"
    );
    if (x < 10) {
        x = (x + 10) / 20;
    } else {
        x = x / 10;
    }
    return x;
};



const getDelayFeedback = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_DELAY_FEEDBACKMAX,
        "delay feedback out of range"
    );
    return (x + 1) * 5;
};



const getDelayTime = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_DELAY_TIMEMAX,
        "delay time out of range"
    );
    return (x + 1) / 10;
};



const getPanner = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_PANNER_MAX,
        "panner out of range"
    );
    return x - 50;
};



const getFade = function (x) {
    assert(LIMIT_MIN <= x && x <= LIMIT_PANNER_MAX,
        "fade out of range"
    );
    if (x !== 0) {
        x = (20 * x) + 60;
    }
    return x;
};


 
const timeIntervalFormat = function (n) {
    if (n < 10) {
        return "0" + String(n);
    }
    return String(n);
};





const audioCreateState = function (HtmlAudio, source) {
    const panner = context.createPanner();
    panner.coneInnerAngle = 360;
    panner.coneOuterAngle = 0;
    panner.coneOuterGain = 0;
    panner.distanceModel = "inverse";
    panner.maxDistance = 10000;
    panner.orientationX.value = 0;
    panner.orientationY.value = 1;
    panner.orientationZ.value = 0;
    panner.panningModel = "HRTF";
    panner.refDistance = 1;

    const filter = context.createBiquadFilter();
    filter.channelCountMode = "max";
    filter.channelInterpretation = "speakers";
    filter.detune.value = 0;
    filter.gain.value = 1;
    filter.type = "lowpass";

    const delay = context.createDelay(getDelayTime(LIMIT_DELAY_TIMEMAX));
    const delayfeedback = context.createGain();
    const delaygain = context.createGain();
    delay.channelCountMode = "max";
    delay.channelInterpretation = "speakers";
    delay.delayTime.value = 0;
    delay.connect(delayfeedback);
    delayfeedback.connect(delayfeedback);
    delayfeedback.connect(delaygain);

    const input = context.createGain();
    const output = context.createGain();
    input.gain.value = DEFAULT_VOLUME / 10;

    source.connect(input);
    output.connect(context.destination);

    return {
        html: HtmlAudio,
        source: source,
        events: 1,
        playing: false,
        volume: DEFAULT_VOLUME,
        duration: HtmlAudio.duration, 
        endPoint: HtmlAudio.duration, 
        endTime: HtmlAudio.duration, 
        startPoint: 0, 
        startTime: 0, 
        delayDisabled: DelayAreAllDisable,
        filterDisabled: FilterAreAllDisable,
        pannerDisabled: PannerAreAllDisable,
        pbrateDisabled: PbRateAreAllDisable,
        rspDisabled: CutRSPAreAllDisable,
        repDisabled: CutREPAreAllDisable,
        pbrate: 1,
        input: input,
        output: output,
        filter: filter,
        panner: panner,
        delay: delay,
        delayfeedback: delayfeedback,
        delaygain: delaygain,
    };
};

const audioRandomizeConnections = function (audio) {
    audio.input.disconnect();
    audio.panner.disconnect();
    audio.filter.disconnect();
    audio.delaygain.disconnect();

    let prev = audio.input;

    if (!audio.pannerDisabled) {
        let x = getPanner(random(PannerYmin, PannerYmax)) / 10;
        let y = getPanner(random(PannerXmin, PannerXmax)) / 10;
        let z = -(random(PannerZmin, PannerZmax) / 10);
        audio.panner.positionX.value = x;
        audio.panner.positionY.value = y;
        audio.panner.positionY.value = z;
        prev.connect(audio.panner);
        prev = audio.panner;
    }
    if (Math.random() < 0.5 && !audio.filterDisabled) {
        let n = 0;
        if (FilterHighpass) {
            FilterTypes[n] = "highpass";
            n += 1;
        }
        if (FilterLowpass) {
            FilterTypes[n] = "lowpass";
            n += 1;
        }
        if (FilterBandpass) {
            FilterTypes[n] = "bandpass";
            n += 1;
        }
        if (FilterNotch) {
            FilterTypes[n] = "notch";
            n += 1;
        }
        let type = "";
        if (n === 1) {
            type = FilterTypes[0];
        } else {
            n = random(0, n-1);
            type = FilterTypes[n];
        }
        let q = 1;
        if (type !== "lowpass" && type !== "highpass") {
            q = getFilterQ(random(FilterQmin, FilterQmax));
        }
        let freq = getFilterFreq(random(FilterFreqmin, FilterFreqmax));


        audio.filter.frequency.value = freq;
        audio.filter.type = type;
        audio.filter.Q.value = q;
        prev.connect(audio.filter);
        prev = audio.filter;
    }
    if (Math.random() < 0.5 && !audio.delayDisabled) {
        let delaytime = getDelayTime(random(DelayTimemin, DelayTimemax));
        let feedback = getDelayFeedback(random(
            DelayFeedbackmin,
            DelayFeedbackmax
        )) / 100;
        audio.delay.delayTime.setValueAtTime(
            delaytime,
            context.currentTime + delaytime
        );
        audio.delayfeedback.gain.value = feedback;
        prev.connect(audio.delay);
        prev.connect(audio.delaygain);
        prev = audio.delaygain;
    }
    prev.connect(audio.output);
};

const audioPlay = function (audio) {
    if (!audio.pbrateDisabled) {
        let pbrate = getPlaybackRate(
            random(PbRatemin, PbRatemax)
        );
        audio.html.playbackRate = pbrate;
    } else {
        audio.html.playbackRate = 1;
    }

    
    if (audio.duration >= 1) {
        let rsp = audio.startTime;
        let rep = audio.endTime;
        let interval = 0.5;
        if (!audio.rspDisabled && !audio.repDisabled) {
            let d = Math.round(audio.duration * 10);
            let p = Math.round((rep - rsp) * 10);
            let min = 5;
            let max = 0;
            if (p < 5) {
                max = min;
            } else if (p > d) {
                max = d;
            } else {
                max = p;
            }
            interval = random(min, max) / 10;
        }
        if (!audio.rspDisabled) {
            rsp = (
                random(audio.startTime * 10, (rep - interval) * 10)
                    / 10
            );
        }
        if (!audio.repDisabled) {
            rep = (
                random((rsp + interval) * 10, audio.endTime * 10)
                    / 10
            );
        }
        audio.startPoint = rsp;
        audio.endPoint = rep;
        audio.html._endPoint = rep;
    }
    audio.html.currentTime = audio.startPoint;

    audioRandomizeConnections(audio);
    audio.html.play();
    audio.playing = true;
};

const audioPause = function (audio) {
    if (audio.playing) {
        audio.delay.delayTime.cancelScheduledValues(context.currentTime);
        audio.delay.delayTime.value = 0;
        audio.html.pause();
        audio.playing = false;
        return true;
    }
    return false;
};

const audioRemove = function (audio, i) {
    audioPause(audio);
    if (!AudioList.makeZombie(i)) {
        throw Error("ERROR: AudioList.makeZombie");
    }
};

 
const audioAction = function (i, action) {
    assert(0 <= i && i < AudioList.len, "ERROR: out of range");

    const state = AudioList.get(i);
    if (state === undefined) {
        return false;
    }
    if ("play" === action) {
        audioPlay(state);
        if (i === AudioSelectedIdx) {
            if (state.duration >= 1) {
                updateHtmlPanelRP(
                    state.startPoint * 100 / state.duration,
                    state.endPoint * 100 / state.duration
                );
            }
            updateHtmlPanelCurrentTime(
                state.html.currentTime * 100 / state.duration,
                state.html.currentTime
            );
        }
        return true;
    } else if ("pause" === action) {
        audioPause(state);
        if (i === AudioSelectedIdx) {
            if (state.duration >= 1) {
                updateHtmlPanelRP(0, 100);
            }
            updateHtmlPanelCurrentTime(0, 0);
        }
        return true;
    } else if ("remove" === action) {
        AudioEventsSum -= state.events;
        assert(AudioEventsSum > -1, "ERROR: AudioEventsSum is less than 0");
        audioRemove(state, i);
        return true;
    }
    return false;
}

 
const AudioOnerror = function (e) {
    const HtmlAudio = e.currentTarget;
    if (HtmlAudio.src) {
        URL.revokeObjectURL(HtmlAudio.src);
    }

    console.error(`ERROR: ${HtmlAudio._name} fails load`);
};

 
const getHtmlChildIndex = function (HtmlParent, HtmlTarget) {
    let c = 0;
    for (let child of HtmlParent.children) {
        if (child === HtmlTarget) {
            return c;
        }
        c += 1;
    }
    return -1
};


const updateHtmlCSets = function () {
    let msg = "";
    for (let i = 0; i < SetEvents.len; i += 1) {
        const HtmlSet = HtmlCSets.children[i]; 
        if (SetEvents.buf[i] === 0) {
            msg = "-";
        } else {
            msg = (SetEvents.buf[i] / SetEvents.sum * 100).toFixed(1);
        }
        HtmlSet.children[2].children["value"].textContent = msg;
    }
};

const updateHtmlAudioProbability = function () {
    if (HtmlAppContainer.childElementCount === 0) {
        return;
    }
    for (let i = 0; i < HtmlAppContainer.childElementCount; i += 1) {
        const HtmlAudioElement = HtmlAppContainer.children[i];
        const AudioState = AudioList.get(i);
        HtmlAudioElement.children["probability"].firstElementChild.textContent = (
            (AudioState.events / AudioEventsSum * 100).toFixed(2)
        );
    }
};

function isMinorThanTen(val) {
    if (val < 10) {
        return "0" + String(val);
    }
    return String(val);
}


function durationToTime(val) {
    val = Math.floor(val);
    const sec = val % 60;
    const min = Math.floor(val / 60) % 60;
    const hr = Math.floor(val / 3600);
    let str = (hr > 0 ? hr + ":" : "");
    str += isMinorThanTen(min) + ":" + isMinorThanTen(sec);
    return str;
}



function durationToShortTime(val) {
    const miliseconds = Math.floor(val * 10) % 10;
    const sec = Math.floor(val) % 60;
    return (sec < 10 ? "0" : "") + sec + "." + miliseconds;
}

 
const updateHtmlPanelRP = function (startval, endval) {
    HtmlPStartPointBar.setAttribute("style", `--translate:${startval}%`);
    HtmlPEndPointBar.setAttribute("style", `--translate:${endval}%`);
};

 
const updateHtmlPanelCurrentTime = function (pval, tval) {
    HtmlPCurrentBar.setAttribute("style", `--translate:${pval}%`);
    HtmlPCurrentText.textContent = durationToTime(tval);
};

const verifyHtmlCSets = function () {
    if (AudioList.len <= SetEvents.max) {
        SetEvents.buf[SetEvents.len] = 1;

        const HtmlSet = HtmlCSets.children[SetEvents.len];
        HtmlSet.setAttribute("data-display", "1"); 
        HtmlSet.children[1].children["value"].textContent = "1";
        SetEvents.sum += 1;
        SetEvents.len += 1;
        updateHtmlCSets();
    }

};

const getAudioStateIndex = function (HtmlAudio) {
    for (let i = 0; i < AudioList.len; i += 1) {
        if (HtmlAudio === AudioList.buf[i].html) {
            return i;
        }
    }
    return -1;
}

const ZombieAudioOncanplaythrough = function (e) {
    const HtmlAudio = e.currentTarget;
    const HtmlAudioElement = HtmlAudioZombies.children[0];
    const i = ZombieList.indexOf(HtmlAudio);
    assert(i !== -1, "ERROR: HtmlAudio not found");
    const state = ZombieList.revive(i);
    ZombieList.seen -= 1;

    state.duration = HtmlAudio.duration;
    state.endPoint = HtmlAudio.duration;
    state.endTime = HtmlAudio.duration;

    HtmlAudio._endPoint = HtmlAudio.duration;
    HtmlAudio._index = AudioList.len;

    HtmlAudio.addEventListener("timeupdate", AudioOntimeupdate, true);
    HtmlAudio.addEventListener("ended", AudioOnended, true);

    
    AudioEventsSum += 1;

    HtmlAudioElement._HtmlTitle.textContent = HtmlAudio._name;
    HtmlAudioElement._HtmlProbText.textContent = (
        (1 / AudioEventsSum * 100).toFixed(2)
    );

    verifyHtmlCSets();
    updateHtmlAudioProbability();

    AudioList.push(state);
    HtmlAppContainer.appendChild(HtmlAudioElement);

    if (AudioSelectedIdx !== -1) {
        let audioSelected = AudioList.get(AudioSelectedIdx);
        
        assert(audioSelected !== undefined);
        updateHtmlPanelProbability(audioSelected.events);
    }
    if (AudioList.len > 1) {
        HtmlPControls.setAttribute("data-scroll", "1");
    }
};



const AudioOncanplaythrough = function (e) {
    const HtmlAudio = e.currentTarget;
    const source = context.createMediaElementSource(HtmlAudio);
    const state = audioCreateState(HtmlAudio, source);
    const HtmlAudioElement = (
        HtmlAudioElementTemplate
        .cloneNode(true)
        .firstElementChild
    );

    HtmlAudio._endPoint = HtmlAudio.duration;
    HtmlAudio._index = AudioList.len;

    HtmlAudio.addEventListener("timeupdate", AudioOntimeupdate, true);
    HtmlAudio.addEventListener("ended", AudioOnended, true);

    HtmlAudioElement._HtmlTitle = HtmlAudioElement.children["title"];
    HtmlAudioElement._HtmlProbText = (
        HtmlAudioElement
        .children["probability"]
        .firstElementChild
    );

    
    AudioEventsSum += 1;

    HtmlAudioElement._HtmlTitle.insertAdjacentText("beforeend", HtmlAudio._name);
    HtmlAudioElement._HtmlProbText.insertAdjacentText(
        "beforeend",
        (1 / (AudioEventsSum) * 100).toFixed(2)
    );

    updateHtmlAudioProbability();
    verifyHtmlCSets();

    HtmlAppContainer.appendChild(HtmlAudioElement);
    AudioList.push(state);

    if (AudioSelectedIdx !== -1) {
        let audioSelected = AudioList.get(AudioSelectedIdx);
        assert(audioSelected !== undefined);
        updateHtmlPanelProbability(audioSelected.events);
    }
    if (AudioList.len > 1) {
        HtmlPControls.setAttribute("data-scroll", "1");
    }
};

const AudioOntimeupdate = function (e) {
    const HtmlAudio = e.currentTarget;
    if (HtmlAudio._zombie) {
        HtmlAudio.removeEventListener("timeupdate", AudioOntimeupdate);
        HtmlAudio.removeEventListener("ended", AudioOnended);
        return;
    }
    if (!HtmlAudio.paused && !HtmlAudio.ended) {
        if(HtmlAudio._endPoint <= HtmlAudio.currentTime) {
            assert(AudioList.len === HtmlAppContainer.childElementCount);
            let i = HtmlAudio._index;
            HtmlAppContainer.children[i].setAttribute("data-playing", "0");
            if (i === AudioSelectedIdx) {
                HtmlAppPanel.setAttribute("data-playing", "0");
            }
            audioAction(i, "pause");
        } else {
            if (AudioSelectedIdx === HtmlAudio._index) {
                updateHtmlPanelCurrentTime(
                    HtmlAudio.currentTime * 100 / HtmlAudio.duration,
                    HtmlAudio.currentTime
                );
            }
        }
    }
};

const AudioOnended = function (e) {
    const HtmlAudio = e.currentTarget;
    if (HtmlAudio.paused || HtmlAudio.ended) {
        let i = getAudioStateIndex(HtmlAudio);
        HtmlAppContainer.children[i].setAttribute("data-playing", "0");
        if (i === AudioSelectedIdx) {
            HtmlAppPanel.setAttribute("data-playing", "0");
        }
        audioAction(i, "pause")
    }
}



const addFiles = function (files) {
    if (AudioList.len === AUDIOELEMENTS_MAX) {
        
        
        return;
    }

    
    
    
    if (timeoutFree !== undefined) {
        clearTimeout(timeoutFree);
        timeoutFree = undefined;
    }

    for (let file of files) {
        if (!file.type.startsWith("audio/")) {
            continue;
        }
        if (!HtmlAudioTemplate.canPlayType(file.type)) {
            console.warn(
                "WARNING:",
                `can not play audio type ${file.type} from ${file.name}`
            );
            
            
            continue;
        }
        if (ZombieList.available()) {
            const ZombieState = ZombieList.see();
            assert(ZombieState !== undefined, "ERROR undefined state: ZombieList.see");

            const HtmlAudio = ZombieState.html;
            HtmlAudio.src = URL.createObjectURL(file);
            HtmlAudio._name = file.name.slice(0, file.name.lastIndexOf("."));
            HtmlAudio._type = file.type;
            HtmlAudio._zombie = false;

            HtmlAudio.addEventListener(
                "canplaythrough",
                ZombieAudioOncanplaythrough,
                EVENT_CO
            );
        } else {
            const HtmlAudio = HtmlAudioTemplate.cloneNode();
            HtmlAudio.src = URL.createObjectURL(file);
            HtmlAudio.preservesPitch = false;
            HtmlAudio._name = file.name.slice(0, file.name.lastIndexOf("."));
            HtmlAudio._type = file.type;
            HtmlAudio._endPoint = 0;
            HtmlAudio._index = 0;
            HtmlAudio._zombie = false;


            HtmlAudio.addEventListener("error", AudioOnerror, EVENT_CO);
            HtmlAudio.addEventListener(
                "canplaythrough",
                AudioOncanplaythrough,
                EVENT_CO
            );
        }
    }
};






const AMAlias = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint32Array(AUDIOELEMENTS_MAX),
};
const AMProbs = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint32Array(AUDIOELEMENTS_MAX),
};
const AMSmalls = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint8Array(AUDIOELEMENTS_MAX),
};
const AMLarges = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint8Array(AUDIOELEMENTS_MAX),
};
const AMP = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint32Array(AUDIOELEMENTS_MAX)
};

 
const selectCardinal = function (events) {
    let cardinal = 0;
    const len = events.len;
    const randIdx = random(0, len-1);
    AMProbs.len = len;
    AMAlias.len = len;
    AMSmalls.len = 0;
    AMLarges.len = 0;
    AMP.len = 0;
    for (let i = 0; i < len; i += 1) {
        const res = events.buf[i] * len;
        if (res < events.sum) {
            AMSmalls.buf[AMSmalls.len] = i;
            AMSmalls.len += 1;
        } else {
            AMLarges.buf[AMLarges.len] = i;
            AMLarges.len += 1;
        }
        AMP.buf[AMP.len] = res;
        AMP.len += 1;
    }
    let s = 0;
    let l = 0;
    while (AMSmalls.len !== 0 && AMLarges.len !== 0) {
        s = AMSmalls.buf[AMSmalls.len-1];
        AMSmalls.len -= 1;
        l = AMLarges.buf[AMLarges.len-1];
        AMLarges.len -= 1;

        AMProbs.buf[s] = AMP.buf[s];
        AMAlias.buf[s] = l;
        AMP.buf[l] = (AMP.buf[l] + AMP.buf[s]) - events.sum;
        if (AMP.buf[l] < events.sum) {
            AMSmalls.buf[AMSmalls.len] = l;
            AMSmalls.len += 1;
        } else {
            AMLarges.buf[AMLarges.len] = l;
            AMLarges.len += 1;
        }
    }
    while (AMSmalls.len !== 0) {
        s = AMSmalls.buf[AMSmalls.len-1];
        AMProbs.buf[s] = events.sum;
        AMSmalls.len -= 1;
    }
    while (AMLarges.len !== 0) {
        l = AMLarges.buf[AMLarges.len-1];
        AMProbs.buf[l] = events.sum;
        AMLarges.len -= 1;
    }
    if (random(0, events.sum-1) < AMProbs.buf[randIdx]) {
        cardinal = randIdx;
    } else {
        cardinal = AMAlias.buf[randIdx];
    }
    return cardinal;
};

const SelectionKeys = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint8Array(AUDIOELEMENTS_MAX),
};

const SelectionSums = {
    len: 0,
    cap: AUDIOELEMENTS_MAX,
    buf: new Uint32Array(AUDIOELEMENTS_MAX),
};

const randomAudioSelection = function (Keys, Sums, sum, w) {
    assert(Keys.len === Sums.len, `ERROR: Keys.len: ${Keys.len}, Sums.len: ${Sums.len}`);
    assert(w > 0, "ERROR on randomAudioSelection: the weight is negative");

    let e = 0;
    for (;;) {
        let selected = 0;
        let target = random(0, sum-1);
        if (Sums.len < 20) {
            for (let i = 0; i < Sums.len; i += 1) {
                if (target < Sums.buf[i]) {
                    selected = i;
                    break;
                }
            }
        } else {
            let startI = 0;
            let endI = Sums.len;
            while (startI <= endI) {
                const midI = Math.floor((startI + endI) / 2);
                if (Sums.buf[midI] < target) {
                    startI = midI + 1;
                } else {
                    if (midI === 0 || Sums.buf[midI-1] < target) {
                        selected = midI;
                        break;
                    }
                    endI = midI - 1;
                }
            }
        }
        SelectedAudios.buf[SelectedAudios.len] = Keys.buf[selected];
        SelectedAudios.len += 1;

        if (e === w-1) {
            break;
        }
        e += 1;

        
        if (selected === 0) {
            sum = 0;
        } else {
            sum = Sums.buf[selected-1];
        }
        for (let i = selected; i < Sums.len-1; i += 1) {
            sum += Sums.buf[i+1] - Sums.buf[i];
            Sums.buf[i] = sum;
            Keys.buf[i] = Keys.buf[i+1];
        }
        Keys.len -= 1;
        Sums.len -= 1;
    }
    assert(w === SelectedAudios.len, `ERROR: weight: ${w}, SelectedAudios.len: ${SelectedAudios.len}`);
    return SelectedAudios;
};

const randomSetSelection = function () {
    if (SetEvents.len < 2) {
        return false;
    }
    const cardinal = selectCardinal(SetEvents);
    console.info("Cardinal:", cardinal);

    if (cardinal <= 0) {
        return false;
    }

    let sum = 0;
    if (cardinal === AudioList.len) {
        SelectedAudios.all = true;
    } else {
        SelectedAudios.len = 0;
        SelectedAudios.all = false;

        SelectionKeys.len = AudioList.len;
        SelectionSums.len = AudioList.len;

        for (let i = 1; i < AudioList.len; i += 1) {
            sum += AudioList.buf[i].events;
            SelectionKeys.buf[i] = i;
            SelectionSums.buf[i] = sum;
        }
        randomAudioSelection(SelectionKeys, SelectionSums, sum, cardinal);
    }
    return true;
};

let executeTimeout = undefined;
 
const randomExecution = function (id) {
    if (Started && StartedId === id) {
        const interval = random(TimeIntervalmin, TimeIntervalmax) * 100;
        console.info("Next execution:", interval);
        console.info("AudioList:", AudioList);
        if (randomSetSelection()) {
            let end = 0;
            if (SelectedAudios.all) {
                end = AudioList.len;
                if (AudioSelectedIdx !== -1 && !reduceMotion) {
                    HtmlPTitle.animate(
                        SelectAnimation.keyframes,
                        SelectAnimation.timing
                    );
                }
                for (let i = 0; i < end; i += 1) {
                    const HtmlAudio = HtmlAppContainer.children[i];
                    HtmlAudio.setAttribute("data-playing", "1");
                    if (!reduceMotion) {
                        HtmlAudio.animate(
                            SelectAnimation.keyframes,
                            SelectAnimation.timing
                        );
                    }
                    audioAction(i, "play",)
                }
            } else {
                end = SelectedAudios.len;
                for (let i = 0; i < end; i += 1) {
                    const j = SelectedAudios.buf[i];
                    audioAction(j, "play",)
                    const HtmlAudio = HtmlAppContainer.children[j];
                    HtmlAudio.setAttribute("data-playing", "1");
                    if (!reduceMotion) {
                        HtmlAudio.animate(
                            SelectAnimation.keyframes,
                            SelectAnimation.timing
                        );
                        if (AudioSelectedIdx === j) {
                            HtmlPTitle.animate(
                                SelectAnimation.keyframes,
                                SelectAnimation.timing
                            );
                        }
                    }
                }
            }
        }
        
        executeTimeout = setTimeout(randomExecution, interval, id);
    } else {
        console.info("END");
        executeTimeout = undefined;
    }
}




const switchTheme = function () {
    let theme = document.firstElementChild.getAttribute("data-theme");
    if (theme === "dark") {
        theme = "light"
    } else if (theme === "light") {
        theme = "dark";
    } else { 
        theme = localStorage.getItem(STORAGE_THEME);
        if (theme !== "dark" && theme !== "light") {
            if (window.matchMedia
                && window.matchMedia("(prefers-color-scheme: dark)").matches
            ) {
                theme = "dark";
            } else {
                theme = "light"
            }
        }
    }
    document.firstElementChild.setAttribute("data-theme", theme);
    localStorage.setItem(STORAGE_THEME, theme);
};

 
const updateHtmlPanelProbability = function (events) {
    HtmlPProbValue.textContent = String(events);
    HtmlPProbText.textContent = `${
        (events / AudioEventsSum * 100).toFixed(2)
    }%`;
};

 
const changeHtmlAppPanel = function (audioState) {
    HtmlPTitle.textContent = audioState.html._name;
    HtmlPVolumeInput.valueAsNumber = audioState.volume;
    HtmlPVolumeText.textContent = `${audioState.volume*10}%`;

    updateHtmlPanelProbability(audioState.events);

    HtmlPEffects.children["delay"].firstElementChild.checked = !audioState.delayDisabled;
    HtmlPEffects.children["panner"].firstElementChild.checked = !audioState.pannerDisabled;
    HtmlPEffects.children["filter"].firstElementChild.checked = !audioState.filterDisabled;
    HtmlPEffects.children["pbrate"].firstElementChild.checked = !audioState.pbrateDisabled;
    HtmlPEffects.children["rsp"].firstElementChild.checked = !audioState.rspDisabled;
    HtmlPEffects.children["rep"].firstElementChild.checked = !audioState.repDisabled;

    HtmlPStartTimeText.textContent = durationToTime(audioState.startTime);
    HtmlPEndTimeText.textContent = durationToTime(audioState.endTime);

    HtmlPStartTimeInput.valueAsNumber = (
        audioState.startTime * 100 / audioState.duration
    );
    HtmlPEndTimeInput.valueAsNumber = (
        audioState.endTime * 100 / audioState.duration
    );
    HtmlPStartTimeBar.setAttribute(
        "style",
        `--translate:${audioState.startTime * 100 / audioState.duration}%`
    );
    HtmlPEndTimeBar.setAttribute(
        "style",
        `--translate:${audioState.endTime * 100 / audioState.duration}%`
    );

    if (audioState.playing) {
        HtmlAppPanel.setAttribute("data-playing", "1");
        updateHtmlPanelCurrentTime(
            audioState.html.currentTime * 100 / audioState.duration,
            audioState.html.currentTime
        );
        updateHtmlPanelRP(
            audioState.startPoint * 100 / audioState.duration,
            audioState.endPoint * 100 / audioState.duration
        );
    } else {
        HtmlAppPanel.setAttribute("data-playing", "0");
        updateHtmlPanelCurrentTime(0, 0);
        updateHtmlPanelRP(0, 100);
    }
};

 
const changeHtmlAppPanelEffect = function (effect, v) {
    if (effect === "delay"
        || effect === "panner"
        || effect === "filter"
        || effect === "pbrate"
        || effect === "rsp"
        || effect === "rep"
    ) {
        HtmlPEffects.children[effect].firstElementChild.checked = v;
    }
}



const HtmlCTimemaxUpdate = function (t) {
    HtmlCTimemaxMM.textContent = timeIntervalFormat(Math.floor(t / 600));
    HtmlCTimemaxSS.textContent = timeIntervalFormat(Math.floor(t / 10) % 60);
    HtmlCTimemaxMS.textContent = String(t % 10);
};



const HtmlCTimeminUpdate = function (t) {
    HtmlCTimeminMM.textContent = timeIntervalFormat(Math.floor(t / 600));
    HtmlCTimeminSS.textContent = timeIntervalFormat(Math.floor(t / 10) % 60);
    HtmlCTimeminMS.textContent = String(t % 10);
};

const HtmlCTimeChanged = function () {
    if (TimeTemporalmax === TimeIntervalmax
        && TimeTemporalmin === TimeIntervalmin
    ) {
        HtmlCTimeContainer.setAttribute("data-changed", "0");
    } else {
        HtmlCTimeContainer.setAttribute("data-changed", "1");
    }
};



const HtmlCTimeAlert = function (target) {
    if (target.getAttribute("data-alert") === "1") {
        target.setAttribute("data-alert", "2");
    } else {
        target.setAttribute("data-alert", "1");
    }
};



const HtmlAppConfigOnclick = function (e) {
    const target = e.target;
    if ("theme-switcher" === target.name) {
        switchTheme();

    } else if ("import" === target.name) {
        target.value = "";

    }else if ("export" === target.name) {
        let encodedJSON = "data:application/json;charset=utf-8,%7B";
        let i = 0;
        let key = "";
        for (;;) {
            if (i === StorageKeys.length) {
                encodedJSON += "%7D";
                break;
            }
            key = StorageKeys[i];
            encodedJSON += `%22${key}%22%3A%22${localStorage.getItem(key)}%22`;
            if (i < StorageKeys.length -1) {
                encodedJSON += "%2C";
            }
            i += 1;
        }
        target.href = encodedJSON;

    } else if ("set-reset" === target.name) {
        SetEvents.zeros = 0;
        SetEvents.max = SetEvents.cap - 1;
        if (SetEvents.len <= AudioList.len) {
            if (AudioList.len > SetEvents.max + 1) {
                SetEvents.len = SetEvents.max + 1;
            } else {
                SetEvents.len = AudioList.len + 1;
            }
        }
        SetEvents.sum = SetEvents.len;
        for (let i = 0; i < SetEvents.len; i += 1) {
            SetEvents.buf[i] = 1;
            const HtmlSet = HtmlCSets.children[i]; 
            HtmlSet.setAttribute("data-display", "1");
            HtmlSet.children[1].children["value"].textContent = "1";
            HtmlSet.children[2].children["value"].textContent = (
                (SetEvents.buf[i] / SetEvents.sum * 100).toFixed(1)
            );
        }
        HtmlCMaxElements.textContent = String(SetEvents.max);

    } else if ("set-left" === target.name) {
        const HtmlSet = target.parentElement.parentElement;
        if (1 === SetEvents.sum) {
            
            console.warn("MUST BE AT LEAST 1 EVENT");
            return;
        }
        let i = getHtmlChildIndex(HtmlCSets, HtmlSet);
        assert(i !== -1, "ERROR gerHtmlChildIndex: there is no HtmlChild on the HtmlParent");
        assert(i < SetEvents.len);

        if (EVENTS_MIN_VALUE === SetEvents.buf[i]) {
            console.info("MIN VALUE FOUND");
            
            return;
        }
        if (EVENTS_MIN_VALUE === SetEvents.buf[i] - 1) {
            SetEvents.zeros += 1;
        }
        SetEvents.buf[i] -= 1;
        SetEvents.sum -= 1;
        target.nextElementSibling.textContent = String(SetEvents.buf[i]);
        updateHtmlCSets();

    } else if ("set-right" === target.name) {
        const HtmlSet = target.parentElement.parentElement;
        let i = getHtmlChildIndex(HtmlCSets, HtmlSet);
        assert(i !== -1, "ERROR gerHtmlChildIndex: there is no HtmlChild on the HtmlParent");
        assert(i < SetEvents.len);

        if (EVENTS_MAX_VALUE === SetEvents.buf[i]) {
            console.info("MAX VALUE FOUND");
            
            return;
        }
        if (EVENTS_MIN_VALUE === SetEvents.buf[i]) {
            SetEvents.zeros -= 1;
        }
        SetEvents.buf[i] += 1;
        SetEvents.sum += 1;
        target.previousElementSibling.textContent = String(SetEvents.buf[i]);
        updateHtmlCSets();

    } else if ("time-reset" === target.name) {
        TimeIntervalmax = DEFAULT_TIMEINTERVAL_MAX;
        TimeIntervalmin = DEFAULT_TIMEINTERVAL_MIN;
        TimeTemporalmax = DEFAULT_TIMEINTERVAL_MAX;
        TimeTemporalmin = DEFAULT_TIMEINTERVAL_MIN;
        localStorage.setItem(STORAGE_TIME_MIN, String(DEFAULT_TIMEINTERVAL_MIN));
        localStorage.setItem(STORAGE_TIME_MAX, String(DEFAULT_TIMEINTERVAL_MAX));
        HtmlCTimemaxUpdate(DEFAULT_TIMEINTERVAL_MAX);
        HtmlCTimeminUpdate(DEFAULT_TIMEINTERVAL_MIN);
        HtmlCTimeContainer.setAttribute("data-changed", "0");

    } else if ("time-cancel" === target.name) {
        HtmlCTimeminUpdate(TimeIntervalmin);
        HtmlCTimemaxUpdate(TimeIntervalmax);
        TimeTemporalmin = TimeIntervalmin;
        TimeTemporalmax = TimeIntervalmax;

        HtmlCTimeContainer.setAttribute("data-changed", "0");

    } else if ("time-apply" === target.name) {
        TimeIntervalmin = TimeTemporalmin;
        TimeIntervalmax = TimeTemporalmax;

        localStorage.setItem(STORAGE_TIME_MIN, String(TimeIntervalmin));
        localStorage.setItem(STORAGE_TIME_MAX, String(TimeIntervalmax));
        HtmlCTimeContainer.setAttribute("data-changed", "0");

    } else if ("time-max-mm-up" === target.name) {
        
        if (TimeTemporalmax + 600 > LIMIT_TIMEINTERVAL_MAX) {
            return;
        }

        HtmlCTimemaxMM.textContent = timeIntervalFormat(
            Math.floor((TimeTemporalmax + 600) / 600)
        );
        TimeTemporalmax += 600;
        HtmlCTimeChanged();

    } else if ("time-max-mm-down" === target.name) {
        
        if (TimeTemporalmax - 600 < TimeTemporalmin) {
            HtmlCTimemaxUpdate(TimeTemporalmin);
            TimeTemporalmax = TimeTemporalmin;
            if (!reduceMotion) {
                HtmlCTimemin.animate(
                    AlertAnimation.keyframes,
                    AlertAnimation.timing
                );
            }
        } else {
            HtmlCTimemaxMM.textContent = timeIntervalFormat(
                Math.floor((TimeTemporalmax - 600) / 600)
            );
            TimeTemporalmax -= 600;
        }
        HtmlCTimeChanged();

    } else if ("time-max-ss-up" === target.name) {
        
        if (TimeTemporalmax + 10 > LIMIT_TIMEINTERVAL_MAX) {
            return;
        }
        HtmlCTimemaxMM.textContent = timeIntervalFormat(
            Math.floor((TimeTemporalmax + 10) / 600)
        );
        HtmlCTimemaxSS.textContent = timeIntervalFormat(
            Math.floor((TimeTemporalmax + 10) / 10) % 60
        );
        TimeTemporalmax += 10;
        HtmlCTimeChanged();

    } else if ("time-max-ss-down" === target.name) {
        e.preventDefault();
        
        if (TimeTemporalmax - 10 < TimeTemporalmin) {
            HtmlCTimemaxUpdate(TimeTemporalmin);
            TimeTemporalmax = TimeTemporalmin;
            if (!reduceMotion) {
                HtmlCTimemin.animate(
                    AlertAnimation.keyframes,
                    AlertAnimation.timing
                );
            }
        } else {
            HtmlCTimemaxMM.textContent = timeIntervalFormat(
                Math.floor((TimeTemporalmax - 10) / 600)
            );
            HtmlCTimemaxSS.textContent = timeIntervalFormat(
                Math.floor((TimeTemporalmax - 10) / 10) % 60
            );
            TimeTemporalmax -= 10;
        }
        HtmlCTimeChanged();

    } else if ("time-max-ms-up" === target.name) {
        
        if (TimeTemporalmax + 1 > LIMIT_TIMEINTERVAL_MAX) {
            return;
        }
        HtmlCTimemaxUpdate(TimeTemporalmax+1);
        TimeTemporalmax += 1;
        HtmlCTimeChanged();


    } else if ("time-max-ms-down" === target.name) {
        
        if (TimeTemporalmax - 1 >= TimeTemporalmin) {
            HtmlCTimemaxUpdate(TimeTemporalmax-1);
            TimeTemporalmax -= 1;
            HtmlCTimeChanged();
        } else {
            if (!reduceMotion) {
                HtmlCTimemin.animate(
                    AlertAnimation.keyframes,
                    AlertAnimation.timing
                );
            }
        }

    } else if ("time-min-mm-up" === target.name) {
        
        if (TimeTemporalmin + 600 > TimeTemporalmax) {
            HtmlCTimeminUpdate(TimeTemporalmax);
            TimeTemporalmin = TimeTemporalmax;
            if (!reduceMotion) {
                HtmlCTimemax.animate(
                    AlertAnimation.keyframes,
                    AlertAnimation.timing
                );
            }
        } else {
            HtmlCTimeminMM.textContent = timeIntervalFormat(
                Math.floor((TimeTemporalmin + 600) / 600)
            );
            TimeTemporalmin += 600;
        }
        HtmlCTimeChanged();

    } else if ("time-min-mm-down" === target.name) {
        
        if (TimeTemporalmin - 600 < LIMIT_TIMEINTERVAL_MIN) {
            return;
        }
        HtmlCTimeminMM.textContent = timeIntervalFormat(
            Math.floor((TimeTemporalmin - 600) / 600)
        );
        TimeTemporalmin -= 600;
        HtmlCTimeChanged();

    } else if ("time-min-ss-up" === target.name) {
        
        if (TimeTemporalmin + 10 > TimeTemporalmax) {
            HtmlCTimeminUpdate(TimeTemporalmax);
            TimeTemporalmin = TimeTemporalmax;
            if (!reduceMotion) {
                HtmlCTimemax.animate(
                    AlertAnimation.keyframes,
                    AlertAnimation.timing
                );
            }
        } else {
            HtmlCTimeminMM.textContent = timeIntervalFormat(
                Math.floor((TimeTemporalmin + 10) / 600)
            );
            HtmlCTimeminSS.textContent = timeIntervalFormat(
                Math.floor((TimeTemporalmin + 10) / 10) % 60
            );
            TimeTemporalmin += 10;
        }
        HtmlCTimeChanged();


    } else if ("time-min-ss-down" === target.name) {
        
        if (TimeTemporalmin - 10 < LIMIT_TIMEINTERVAL_MIN) {
            return;
        }
        HtmlCTimeminMM.textContent = timeIntervalFormat(
            Math.floor((TimeTemporalmin - 10) / 600)
        );
        HtmlCTimeminSS.textContent = timeIntervalFormat(
            Math.floor((TimeTemporalmin - 10) / 10) % 60
        );
        TimeTemporalmin -= 10;
        HtmlCTimeChanged();

    } else if ("time-min-ms-up" === target.name) {
        
        if (TimeTemporalmin + 1 <= TimeTemporalmax) {
            HtmlCTimeminUpdate(TimeTemporalmin+1);
            TimeTemporalmin += 1;
            HtmlCTimeChanged();
        } else {
            if (!reduceMotion) {
                HtmlCTimemax.animate(
                    AlertAnimation.keyframes,
                    AlertAnimation.timing
                );
            }
        }

    } else if ("time-min-ms-down" === target.name) {
        
        if (TimeTemporalmin - 1 < LIMIT_TIMEINTERVAL_MIN) {
            return;
        }
        HtmlCTimeminUpdate(TimeTemporalmin-1);
        TimeTemporalmin -= 1;
        HtmlCTimeChanged();

    } else if ("fades-reset" === target.name) {
        HtmlCFadein.firstElementChild.valueAsNumber = DEFAULT_FADEIN;
        HtmlCFadein.lastElementChild.children["value"].textContent = String(
            getFade(DEFAULT_FADEIN)
        );
        HtmlCFadeout.firstElementChild.valueAsNumber = DEFAULT_FADEOUT;
        HtmlCFadeout.lastElementChild.children["value"].textContent = String(
            getFade(DEFAULT_FADEOUT)
        );
        localStorage.setItem(STORAGE_FADEIN, String(DEFAULT_FADEIN));
        localStorage.setItem(STORAGE_FADEOUT, String(DEFAULT_FADEOUT));
        FadeIn = DEFAULT_FADEIN;
        FadeOut = DEFAULT_FADEOUT;

    } else if ("delay-reset" === target.name) {
        HtmlCDelayTimemin.children["delay-timemin"].valueAsNumber = (
            DEFAULT_DELAY_TIMEMIN
        );
        HtmlCDelayTimemin.lastElementChild.children["value"].textContent = (
            getDelayTime(DEFAULT_DELAY_TIMEMIN).toFixed(1)
        );
        HtmlCDelayTimemax.children["delay-timemax"].valueAsNumber = (
            LIMIT_DELAY_TIMEMAX - DEFAULT_DELAY_TIMEMAX
        );
        HtmlCDelayTimemax.lastElementChild.children["value"].textContent = (
            getDelayTime(DEFAULT_DELAY_TIMEMAX).toFixed(1)
        );
        HtmlCDelayFeedbackmin.children["delay-feedbackmin"].valueAsNumber = (
            DEFAULT_DELAY_FEEDBACKMIN
        );
        HtmlCDelayFeedbackmin.lastElementChild.children["value"].textContent = String(
            getDelayFeedback(DEFAULT_DELAY_FEEDBACKMIN)
        );
        HtmlCDelayFeedbackmax.children["delay-feedbackmax"].valueAsNumber = (
            LIMIT_DELAY_FEEDBACKMAX - DEFAULT_DELAY_FEEDBACKMAX
        );
        HtmlCDelayFeedbackmax.lastElementChild.children["value"].textContent = String(
            getDelayFeedback(DEFAULT_DELAY_FEEDBACKMAX)
        );

        localStorage.setItem(STORAGE_DELAY_TIMEMAX, String(DEFAULT_DELAY_TIMEMAX));
        localStorage.setItem(STORAGE_DELAY_TIMEMIN, String(DEFAULT_DELAY_TIMEMIN));
        localStorage.setItem(STORAGE_DELAY_FEEDBACKMAX, String(DEFAULT_DELAY_FEEDBACKMAX));
        localStorage.setItem(STORAGE_DELAY_FEEDBACKMIN, String(DEFAULT_DELAY_FEEDBACKMIN));
        DelayTimemax = DEFAULT_DELAY_TIMEMAX;
        DelayTimemin = DEFAULT_DELAY_TIMEMIN;
        DelayFeedbackmax = DEFAULT_DELAY_FEEDBACKMAX;
        DelayFeedbackmin = DEFAULT_DELAY_FEEDBACKMIN;

    } else if ("filter-reset" === target.name) {
        HtmlCFilterFreqmin.children["filter-freqmin"].valueAsNumber = (
            DEFAULT_FILTER_FREQMIN
        );
        HtmlCFilterFreqmin.lastElementChild.children["value"].textContent = String(
            getFilterFreq(DEFAULT_FILTER_FREQMIN)
        );
        HtmlCFilterFreqmax.children["filter-freqmax"].valueAsNumber = (
            LIMIT_FILTER_FREQMAX - DEFAULT_FILTER_FREQMAX
        );
        HtmlCFilterFreqmax.lastElementChild.children["value"].textContent = String(
            getFilterFreq(DEFAULT_FILTER_FREQMAX)
        );
        HtmlCFilterQmin.children["filter-qmin"].valueAsNumber = DEFAULT_FILTER_QMIN;
        HtmlCFilterQmin.lastElementChild.children["value"].textContent = String(
            getFilterQ(DEFAULT_FILTER_QMIN)
        );
        HtmlCFilterQmax.children["filter-qmax"].valueAsNumber = (
            LIMIT_FILTER_QMAX - DEFAULT_FILTER_QMAX
        );
        HtmlCFilterQmax.lastElementChild.children["value"].textContent = String(
            getFilterQ(DEFAULT_FILTER_QMAX)
        );
        let elements = HtmlCFilterEffects.elements;
        elements["filter-bandpass"].checked = DEFAULT_FILTER_BANDPASS;
        elements["filter-highpass"].checked = DEFAULT_FILTER_HIGHPASS;
        elements["filter-lowpass"].checked = DEFAULT_FILTER_LOWPASS;
        elements["filter-notch"].checked = DEFAULT_FILTER_NOTCH;

        localStorage.setItem(STORAGE_FILTER_FREQMAX, String(DEFAULT_FILTER_FREQMAX));
        localStorage.setItem(STORAGE_FILTER_FREQMIN, String(DEFAULT_FILTER_FREQMIN));
        localStorage.setItem(STORAGE_FILTER_QMAX, String(DEFAULT_FILTER_QMAX));
        localStorage.setItem(STORAGE_FILTER_QMIN, String(DEFAULT_FILTER_QMIN));
        localStorage.setItem(
            STORAGE_FILTER_BANDPASS,
            String(Number(DEFAULT_FILTER_BANDPASS))
        );
        localStorage.setItem(
            STORAGE_FILTER_HIGHPASS,
            String(Number(DEFAULT_FILTER_HIGHPASS))
        );
        localStorage.setItem(
            STORAGE_FILTER_LOWPASS,
            String(Number(DEFAULT_FILTER_LOWPASS))
        );
        localStorage.setItem(STORAGE_FILTER_NOTCH, DEFAULT_FILTER_NOTCH);
        FilterFreqmax = DEFAULT_FILTER_FREQMAX;
        FilterFreqmin = DEFAULT_FILTER_FREQMIN;
        FilterQmax = DEFAULT_FILTER_QMAX;
        FilterQmin = DEFAULT_FILTER_QMIN;
        FilterBandpass = DEFAULT_FILTER_BANDPASS;
        FilterHighpass = DEFAULT_FILTER_HIGHPASS;
        FilterLowpass = DEFAULT_FILTER_LOWPASS;
        FilterNotch = DEFAULT_FILTER_NOTCH;

    } else if ("panner-reset" === target.name) {
        HtmlCPannerXmin.children["panner-xmin"].valueAsNumber = DEFAULT_PANNER_XMIN;
        HtmlCPannerXmin.lastElementChild.children["value"].textContent = String(
            getPanner(DEFAULT_PANNER_XMIN)
        );
        HtmlCPannerXmax.children["panner-xmax"].valueAsNumber = (
            LIMIT_PANNER_MAX - DEFAULT_PANNER_XMAX
        );
        HtmlCPannerXmax.lastElementChild.children["value"].textContent = String(
            getPanner(DEFAULT_PANNER_XMAX)
        );
        HtmlCPannerYmin.children["panner-ymin"].valueAsNumber = DEFAULT_PANNER_YMIN;
        HtmlCPannerYmin.lastElementChild.children["value"].textContent = String(
            getPanner(DEFAULT_PANNER_YMIN)
        );
        HtmlCPannerYmax.children["panner-ymax"].valueAsNumber = (
            LIMIT_PANNER_MAX - DEFAULT_PANNER_YMAX
        );
        HtmlCPannerYmax.lastElementChild.children["value"].textContent = String(
            getPanner(DEFAULT_PANNER_YMAX)
        );
        HtmlCPannerZmin.children["panner-zmin"].valueAsNumber = DEFAULT_PANNER_ZMIN;
        HtmlCPannerZmin.lastElementChild.children["value"].textContent = String(
            DEFAULT_PANNER_ZMIN
        );
        HtmlCPannerZmax.children["panner-zmax"].valueAsNumber = (
            LIMIT_PANNER_ZMAX - DEFAULT_PANNER_ZMAX
        );
        HtmlCPannerZmax.lastElementChild.children["value"].textContent = String(
            DEFAULT_PANNER_ZMAX
        );
        localStorage.setItem(STORAGE_PANNER_XMIN, String(DEFAULT_PANNER_XMIN));
        localStorage.setItem(STORAGE_PANNER_XMAX, String(DEFAULT_PANNER_XMAX));
        localStorage.setItem(STORAGE_PANNER_YMIN, String(DEFAULT_PANNER_YMIN));
        localStorage.setItem(STORAGE_PANNER_YMAX, String(DEFAULT_PANNER_YMAX));
        localStorage.setItem(STORAGE_PANNER_ZMIN, String(DEFAULT_PANNER_ZMIN));
        localStorage.setItem(STORAGE_PANNER_ZMAX, String(DEFAULT_PANNER_ZMAX));
        PannerXmax = DEFAULT_PANNER_XMAX;
        PannerXmin = DEFAULT_PANNER_XMIN;
        PannerYmax = DEFAULT_PANNER_YMAX;
        PannerYmin = DEFAULT_PANNER_YMIN;
        PannerZmax = DEFAULT_PANNER_ZMAX;
        PannerZmin = DEFAULT_PANNER_ZMIN;

    } else if ("pbrate-reset" === target.name) {
        HtmlCPbrateMin.children["pbrate-min"].valueAsNumber = DEFAULT_PBRATE_MIN;
        HtmlCPbrateMin.lastElementChild.children["value"].textContent = (
            getPlaybackRate(DEFAULT_PBRATE_MIN).toFixed(2)
        );
        HtmlCPbrateMax.children["pbrate-max"].valueAsNumber = (
            LIMIT_PBRATE_MAX - DEFAULT_PBRATE_MAX
        );
        HtmlCPbrateMax.lastElementChild.children["value"].textContent = (
            getPlaybackRate(DEFAULT_PBRATE_MAX).toFixed(2)
        );
        localStorage.setItem(STORAGE_PBRATE_MIN, String(DEFAULT_PBRATE_MIN));
        localStorage.setItem(STORAGE_PBRATE_MAX, String(DEFAULT_PBRATE_MAX));
        PbRatemin = DEFAULT_PBRATE_MIN;
        PbRatemax = DEFAULT_PBRATE_MAX;
    }
};




const HtmlAppConfigOninput = function (e) {
    const target = e.target;
    if ("import" === target.name) {
        if (target.files?.[0] === undefined) {
            return;
        }
        Reader.readAsText(target.files[0]);

    } else if ("elements-checkbox" === target.name) {
        console.info("elements-checkbox",{target})
        if (HtmlCSetDetails.getAttribute("data-elements") === "0") {
            HtmlCSetDetails.setAttribute("data-elements", "1");
        } else {
            HtmlCSetDetails.setAttribute("data-elements", "0");
        }
    } else if ("elements-radio" === target.name) {
        const value = Number(target.value);
        if (value === SetEvents.max || value < 1) {
            return;
        }
        assert(0 < value && value < SetEvents.cap);
        let max = 0;
        if (value < SetEvents.max) {
            if (AudioList.len < SetEvents.max) {
                max = AudioList.len;
            } else {
                max = SetEvents.max;
            }
            for (let i = value + 1; i < max + 1; i += 1) {
                const HtmlSet = HtmlCSets.children[i]; 
                HtmlSet.setAttribute("data-display", "0"); 
                SetEvents.sum -= SetEvents.buf[i];
            }
            if (value < max) {
                SetEvents.len -= max - value; 
            }
        } else {
            if (AudioList.len < value) {
                max = AudioList.len;
            } else {
                max = value;
            }
            for (let i = SetEvents.max + 1; i < max + 1; i += 1) {
                const HtmlSet = HtmlCSets.children[i]; 
                HtmlSet.setAttribute("data-display", "1"); 
                HtmlSet.children[1].children["value"].textContent = "1";
                SetEvents.buf[i] = 1;
            }
            if (SetEvents.max < max) {
                SetEvents.len += max - SetEvents.max; 
                SetEvents.sum += max - SetEvents.max;
            }
        }
        SetEvents.max = value;
        updateHtmlCSets();

        HtmlCMaxElements.textContent = target.value;
        HtmlCSetDetails.setAttribute("data-elements", "0");

    } else if ("fadein" === target.name) {
        FadeIn = target.valueAsNumber;
        HtmlCFadein.lastElementChild.children["value"].textContent = String(
            getFade(target.valueAsNumber)
        );
        localStorage.setItem(STORAGE_FADEIN, FadeIn);

    } else if ("fadeout" === target.name) {
        FadeOut = target.valueAsNumber;
        HtmlCFadeout.lastElementChild.children["value"].textContent = String(
            getFade(target.valueAsNumber)
        );
        localStorage.setItem(STORAGE_FADEIN, FadeOut);

    } else if ("delay-da" === target.name) {
        DelayAreAllDisable = target.checked;
        localStorage.setItem(
            STORAGE_DELAY_DISABLE,
            String(Number(DelayAreAllDisable))
        );

        if (AudioList.len < 0) {
            return;
        }
        for (let i = 0; i < AudioList.len; i += 1) {
            const state = AudioList.get(i);
            state.delayDisabled = target.checked;
        }
        if (AudioSelectedIdx !== -1) {
            changeHtmlAppPanelEffect("delay", !target.checked);
        }

    } else if ("delay-timemin" === target.name) {
        if (target.valueAsNumber > DelayTimemax) {
            target.valueAsNumber = DelayTimemax;
        }
        DelayTimemin = target.valueAsNumber;
        HtmlCDelayTimemin.lastElementChild.children["value"].textContent = (
            getDelayTime(DelayTimemin).toFixed(1)
        );
        localStorage.setItem(STORAGE_DELAY_TIMEMIN, String(DelayTimemin));

    } else if ("delay-timemax" === target.name) {
        if (DelayTimemin > LIMIT_DELAY_TIMEMAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_DELAY_TIMEMAX - DelayTimemin;
        }
        DelayTimemax = LIMIT_DELAY_TIMEMAX - target.valueAsNumber;
        HtmlCDelayTimemax.lastElementChild.children["value"].textContent = (
            getDelayTime(DelayTimemax).toFixed(1)
        );
        localStorage.setItem(STORAGE_DELAY_TIMEMAX, String(DelayTimemax));

    } else if ("delay-feedbackmin" === target.name) {
        if (target.valueAsNumber > DelayFeedbackmax) {
            target.valueAsNumber = DelayFeedbackmax;
        }
        DelayFeedbackmin = target.valueAsNumber;
        HtmlCDelayFeedbackmin.lastElementChild.children["value"].textContent = String(
            getDelayFeedback(DelayFeedbackmin)
        );
        localStorage.setItem(STORAGE_DELAY_FEEDBACKMIN, String(DelayFeedbackmin));

    } else if ("delay-feedbackmax" === target.name) {
        if (DelayFeedbackmin > LIMIT_DELAY_FEEDBACKMAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_DELAY_FEEDBACKMAX - DelayFeedbackmin;
        }
        DelayFeedbackmax = LIMIT_DELAY_FEEDBACKMAX - target.valueAsNumber;
        HtmlCDelayFeedbackmax.lastElementChild.children["value"].textContent = String(
            getDelayFeedback(DelayFeedbackmax)
        );
        localStorage.setItem(STORAGE_DELAY_FEEDBACKMAX, String(DelayFeedbackmax));

    } else if ("filter-da" === target.name) {
        FilterAreAllDisable = target.checked;
        localStorage.setItem(
            STORAGE_FILTER_DISABLE,
            String(Number(FilterAreAllDisable))
        );
        if (AudioList.len < 0) {
            return;
        }
        for (let i = 0; i < AudioList.len; i += 1) {
            const state = AudioList.get(i);
            state.filterDisabled = target.checked;
        }
        if (AudioSelectedIdx !== -1) {
            changeHtmlAppPanelEffect("filter", !target.checked);
        }

    } else if ("filter-freqmin" === target.name) {
        if (target.valueAsNumber > FilterFreqmax) {
            target.valueAsNumber = FilterFreqmax;
        }
        FilterFreqmin = target.valueAsNumber;
        HtmlCFilterFreqmin.lastElementChild.children["value"].textContent = String(
            getFilterFreq(FilterFreqmin)
        );
        localStorage.setItem(STORAGE_FILTER_FREQMIN, String(FilterFreqmin));

    } else if ("filter-freqmax" === target.name) {
        if (FilterFreqmin > LIMIT_FILTER_FREQMAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_FILTER_FREQMAX - FilterFreqmin;
        }
        FilterFreqmax = LIMIT_FILTER_FREQMAX - target.valueAsNumber;
        HtmlCFilterFreqmax.lastElementChild.children["value"].textContent = String(
            getFilterFreq(FilterFreqmax)
        );
        localStorage.setItem(STORAGE_FILTER_FREQMAX, String(FilterFreqmax));

    } else if ("filter-qmin" === target.name) {
        if (target.valueAsNumber > FilterQmax) {
            target.valueAsNumber = FilterQmax;
        }
        FilterQmin = target.valueAsNumber;
        HtmlCFilterQmin.lastElementChild.children["value"].textContent = String(
            getFilterQ(FilterQmin)
        );
        localStorage.setItem(STORAGE_FILTER_QMIN, String(FilterQmin));

    } else if ("filter-qmax" === target.name) {
        if (FilterQmin > LIMIT_FILTER_QMAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_FILTER_QMAX - FilterQmin;
        }
        FilterQmax = LIMIT_FILTER_QMAX - target.valueAsNumber;
        HtmlCFilterQmax.lastElementChild.children["value"].textContent = String(
            getFilterQ(FilterQmax)
        );
        localStorage.setItem(STORAGE_FILTER_QMAX, String(FilterQmax));

    } else if ("filter-highpass" === target.name) {
        if (FilterHighpass
            && !FilterLowpass
            && !FilterBandpass
            && !FilterNotch
        ) {
            target.checked = true;
        }
        FilterHighpass = target.checked;
        localStorage.setItem(
            STORAGE_FILTER_HIGHPASS,
            String(Number(FilterHighpass))
        );

    } else if ("filter-lowpass" === target.name) {
        if (FilterLowpass
            && !FilterHighpass
            && !FilterBandpass
            && !FilterNotch
        ) {
            target.checked = true;
        }
        FilterLowpass = target.checked;
        localStorage.setItem(
            STORAGE_FILTER_LOWPASS,
            String(Number(FilterLowpass))
        );

    } else if ("filter-bandpass" === target.name) {
        if (FilterBandpass
            && !FilterLowpass
            && !FilterHighpass
            && !FilterNotch
        ) {
            target.checked = true;
        }
        FilterBandpass = target.checked;
        localStorage.setItem(
            STORAGE_FILTER_BANDPASS,
            String(Number(FilterBandpass))
        );

    } else if ("filter-notch" === target.name) {
        if (FilterNotch
            && !FilterLowpass
            && !FilterBandpass
            && !FilterHighpass
        ) {
            target.checked = true;
        }
        FilterNotch = target.checked;
        localStorage.setItem(
            STORAGE_FILTER_NOTCH,
            String(Number(FilterNotch))
        );

    } else if ("panner-da" === target.name) {
        PannerAreAllDisable = target.checked;
        localStorage.setItem(
            STORAGE_PANNER_DISABLE,
            String(Number(PannerAreAllDisable))
        );
        if (AudioList.len < 0) {
            return;
        }
        for (let i = 0; i < AudioList.len; i += 1) {
            const state = AudioList.get(i);
            state.pannerDisabled = target.checked;
        }
        if (AudioSelectedIdx !== -1) {
            changeHtmlAppPanelEffect("panner", !target.checked);
        }

    } else if ("panner-xmin" === target.name) {
        if (target.valueAsNumber > PannerXmax) {
            target.valueAsNumber = PannerXmax;
        }
        PannerXmin = target.valueAsNumber;
        HtmlCPannerXmin.lastElementChild.children["value"].textContent = String(
            getPanner(PannerXmin)
        );
        localStorage.setItem(STORAGE_PANNER_XMIN, String(PannerXmin));

    } else if ("panner-xmax" === target.name) {
        if (PannerXmin > LIMIT_PANNER_MAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_PANNER_MAX - PannerXmin;
        }
        PannerXmax = LIMIT_PANNER_MAX - target.valueAsNumber;
        HtmlCPannerXmax.lastElementChild.children["value"].textContent = String(
            getPanner(PannerXmax)
        );
        localStorage.setItem(STORAGE_PANNER_XMAX, String(PannerXmax));

    } else if ("panner-ymin" === target.name) {
        if (target.valueAsNumber > PannerYmax) {
            target.valueAsNumber = PannerYmax;
        }
        PannerYmin = target.valueAsNumber;
        HtmlCPannerYmin.lastElementChild.children["value"].textContent = String(
            getPanner(PannerYmin)
        );
        localStorage.setItem(STORAGE_PANNER_YMIN, String(PannerYmin));

    } else if ("panner-ymax" === target.name) {
        if (PannerYmin > LIMIT_PANNER_MAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_PANNER_MAX - PannerYmin;
        }
        PannerYmax = LIMIT_PANNER_MAX - target.valueAsNumber;
        HtmlCPannerYmax.lastElementChild.children["value"].textContent = String(
            getPanner(PannerYmax)
        );
        localStorage.setItem(STORAGE_PANNER_YMAX, String(PannerYmax));

    } else if ("panner-zmin" === target.name) {
        if (target.valueAsNumber > PannerZmax) {
            target.valueAsNumber = PannerZmax;
        }
        PannerZmin = target.valueAsNumber;
        HtmlCPannerZmin.lastElementChild.children["value"].textContent = String(PannerZmin);
        localStorage.setItem(STORAGE_PANNER_ZMIN, String(PannerZmin));

    } else if ("panner-zmax" === target.name) {
        if (PannerZmin > LIMIT_PANNER_ZMAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_PANNER_ZMAX - PannerZmin;
        }
        PannerZmax = LIMIT_PANNER_ZMAX - target.valueAsNumber;
        HtmlCPannerZmax.lastElementChild.children["value"].textContent = String(PannerZmax);
        localStorage.setItem(STORAGE_PANNER_ZMAX, String(PannerZmax));


    } else if ("pbrate-da" === target.name) {
        PbRateAreAllDisable = target.checked;
        localStorage.setItem(
            STORAGE_PBRATE_DISABLE,
            String(Number(PbRateAreAllDisable))
        );
        if (AudioList.len < 0) {
            return;
        }
        for (let i = 0; i < AudioList.len; i += 1) {
            const state = AudioList.get(i);
            state.pbrateDisabled = target.checked;
        }
        if (AudioSelectedIdx !== -1) {
            changeHtmlAppPanelEffect("pbrate", !target.checked);
        }

    } else if ("pbrate-min" === target.name) {
        if (target.valueAsNumber > PbRatemax) {
            target.valueAsNumber = PbRatemax;
        }
        PbRatemin = target.valueAsNumber;
        HtmlCPbrateMin.lastElementChild.children["value"].textContent = (
            getPlaybackRate(PbRatemin).toFixed(2)
        );
        localStorage.setItem(STORAGE_PBRATE_MIN, String(PbRatemin));

    } else if ("pbrate-max" === target.name) {
        if (PbRatemin > LIMIT_PBRATE_MAX - target.valueAsNumber) {
            target.valueAsNumber = LIMIT_PBRATE_MAX - PbRatemin;
        }
        PbRatemax = LIMIT_PBRATE_MAX - target.valueAsNumber;
        HtmlCPbrateMax.lastElementChild.children["value"].textContent = (
            getPlaybackRate(PbRatemax).toFixed(2)
        );
        localStorage.setItem(STORAGE_PBRATE_MAX, String(PbRatemax));

    } else if ("rsp-da" === target.name) {
        CutRSPAreAllDisable = target.checked;
        localStorage.setItem(
            STORAGE_CRSP_DISABLE,
            String(Number(CutRSPAreAllDisable))
        );
        if (AudioList.len < 0) {
            return;
        }
        for (let i = 0; i < AudioList.len; i += 1) {
            const state = AudioList.get(i);
            state.rspDisabled = target.checked;
        }
        if (AudioSelectedIdx !== -1) {
            changeHtmlAppPanelEffect("rsp", !target.checked);
        }

    } else if ("rep-da" === target.name) {
        CutREPAreAllDisable = target.checked;
        localStorage.setItem(
            STORAGE_CREP_DISABLE,
            String(Number(CutREPAreAllDisable))
        );
        if (AudioList.len < 0) {
            return;
        }
        for (let i = 0; i < AudioList.len; i += 1) {
            const state = AudioList.get(i);
            state.repDisabled = target.checked;
        }
        if (AudioSelectedIdx !== -1) {
            changeHtmlAppPanelEffect("rep", !target.checked);
        }
    }
};

const HtmlAppMenuOnclick = function (e) {
    const target = e.target;
    const name = target.getAttribute("name");
    if ("start" === name) {
        let dataStart = target.getAttribute("data-start");
        if (dataStart === "0") {
            Started = true;
            randomExecution(startedIdNext());
            target.setAttribute("data-start", "1");
        } else {
            Started = false;
            if (undefined !== executeTimeout) {
                clearTimeout(executeTimeout);
                executeTimeout = undefined;
            }
            for (let i = 0; i < AudioList.len; i += 1) {
                audioAction(i, "pause");
                HtmlAppContainer.children[i].setAttribute("data-playing", "0");
            }
            target.setAttribute("data-start", "0");
        }
    } else if ("clear" === name) {
        if (AudioList.len === 0) {
            return;
        }

        defaultSets();

        for (let audio of AudioList.buf) {
            audioPause(audio);
            AudioList.cleanAudio(audio);
            ZombieList.push(audio);
        }
        AudioList.buf.length = 0;
        AudioList.len = 0;

        AudioEventsSum = 0;

        AudioSelectedIdx = -1;
        HtmlAppPanel.setAttribute("data-display", "0");

        HtmlAudioZombies.append.apply(
            HtmlAudioZombies,
            HtmlAppContainer.children
        );
        clearTimeout(timeoutFree);
        timeoutFree = setTimeout(timeoutFreeFn,FREE_TIME);

    } else if ("file" === name) {
        target.value = "";
    } else if ("config" === name) {
        if (target.checked) {
            HtmlAppConfig.setAttribute("data-show", "1");
        } else {
            HtmlAppConfig.setAttribute("data-show", "0");
        }
    }
};

const HtmlAppMenuOninput = function (e) {
    const target = e.target;
    if (target.name === "file") {
        addFiles(target.files);
    }
};

const HtmlAppContainerOnclick = function (e) {
    const target = e.target;
    const name = target.getAttribute("name");
    if ("play" === name) {
        const HtmlAudioElement = target.parentElement;
        let i = getHtmlChildIndex(HtmlAppContainer, HtmlAudioElement);
        if (HtmlAudioElement.getAttribute("data-playing") === "0") {
            HtmlAudioElement.setAttribute("data-playing", "1");
            if (i === AudioSelectedIdx) {
                HtmlAppPanel.setAttribute("data-playing", "1");
            }
            audioAction(i, "play");
        } else {
            HtmlAudioElement.setAttribute("data-playing", "0");
            if (i === AudioSelectedIdx) {
                HtmlAppPanel.setAttribute("data-playing", "0");
            }
            audioAction(i, "pause");
        }
    } else if ("remove" === name) {
        const HtmlAudioElement = target.parentElement;
        let i = getHtmlChildIndex(HtmlAppContainer, HtmlAudioElement);

        audioAction(i, "remove");
        HtmlAudioZombies.appendChild(HtmlAudioElement);

        if (AudioList.len < SetEvents.max) {
            const HtmlSet = HtmlCSets.children[SetEvents.len-1];
            HtmlSet.setAttribute("data-display", "0"); 
            if (0 === SetEvents.buf[SetEvents.len-1]) {
                SetEvents.zeros -= 1;
            } else {
                SetEvents.sum -= SetEvents.buf[SetEvents.len-1];
            }
            SetEvents.len -= 1;

            updateHtmlCSets();
        }

        
        if (i === AudioSelectedIdx || AudioList.len === 0) {
            
            AudioSelectedIdx = -1;
            HtmlAppPanel.setAttribute("data-display", "0");
        } else if (AudioSelectedIdx - 1 > -1) {
            AudioSelectedIdx -= 1;
            const audioSelected = AudioList.get(AudioSelectedIdx);
            
            assert(audioSelected !== undefined);
            updateHtmlPanelProbability(audioSelected.events);
        }
        if (AudioList.len !== 0) {
            updateHtmlAudioProbability();
        }


        
        HtmlAudioElement.setAttribute("data-playing", "0");
        HtmlAudioElement.setAttribute("data-selected", "0");

        if (AudioList.len < 2) {
            HtmlPControls.setAttribute("data-scroll", "0");
        }

        clearTimeout(timeoutFree)
        timeoutFree = setTimeout(timeoutFreeFn,FREE_TIME);
    } else if ("title" === name
        || "pin" === name
        || "audio" === name
        || "probability" === name
    ) {
        let HTMLAudioElement = target;
        if ("audio" !== name) {
            HTMLAudioElement = target.parentElement;
        }
        if (HTMLAudioElement.getAttribute("data-selected") === "0") {
            let i = getHtmlChildIndex(HtmlAppContainer, HTMLAudioElement);
            assert(i !== -1, "ERROR: index do not exist");
            assert(i < AudioList.len, "ERROR: the index is out of AudioList");

            if (AudioSelectedIdx !== -1) {
                
                HtmlAppContainer.children[AudioSelectedIdx].setAttribute(
                    "data-selected",
                    "0"
                );
            } else {
                HtmlAppPanel.setAttribute("data-display", "1");
            }
            HTMLAudioElement.setAttribute("data-selected", "1");
            
            AudioSelectedIdx = i;

            changeHtmlAppPanel(AudioList.get(i));
        } else {
            HTMLAudioElement.setAttribute("data-selected", "0");
            HtmlAppPanel.setAttribute("data-display", "0");
            
            AudioSelectedIdx = -1;
        }
    }
};


const HtmlAppPanelOnclick = function (e) {
    assert(AudioSelectedIdx !== -1, "ERROR: Panel Bad Open");

    const target = e.target;
    if ("p-left" === target.name) {
        if (AudioList.len === 1) {
            return;
        }

        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        if (state.events === AUIDIO_EVENT_MIN_VALUE) {
            return;
        }
        state.events -= 1;
        AudioEventsSum -= 1;

        updateHtmlAudioProbability();
        updateHtmlPanelProbability(state.events);

    } else if ("p-right" === target.name) {
        if (AudioList.len === 1) {
            return;
        }
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        if (state.events === AUDIO_EVENT_MAX_VALUE) {
            return;
        }
        state.events += 1;
        AudioEventsSum += 1;

        updateHtmlAudioProbability();
        updateHtmlPanelProbability(state.events);
    } else if ("play" === target.name) {
        const HtmlAudioElement = HtmlAppContainer.children[AudioSelectedIdx];
        if (HtmlAudioElement.getAttribute("data-playing") === "0") {
            HtmlAudioElement.setAttribute("data-playing", "1");
            HtmlAppPanel.setAttribute("data-playing", "1");
            audioAction(AudioSelectedIdx, "play");
        } else {
            HtmlAudioElement.setAttribute("data-playing", "0");
            HtmlAppPanel.setAttribute("data-playing", "0");
            audioAction(AudioSelectedIdx, "pause");
        }
    } else if ("close" === target.name) {
        const HTMLAudioElement = HtmlAppContainer.children[AudioSelectedIdx];
        HTMLAudioElement.setAttribute("data-selected", "0");
        HtmlAppPanel.setAttribute("data-display", "0");
        
        AudioSelectedIdx = -1;

    } else if ("prev" === target.name) {
        HtmlAppContainer.children[AudioSelectedIdx].setAttribute("data-selected", "0");
        if (AudioSelectedIdx < 1) {
            AudioSelectedIdx = AudioList.len - 1;
        } else {
            AudioSelectedIdx -= 1;
        }
        const audioState = AudioList.get(AudioSelectedIdx);
        assert(audioState !== undefined, "ERROR: AudioList.get not found audio")
        HtmlAppContainer.children[AudioSelectedIdx].setAttribute("data-selected", "1");
        changeHtmlAppPanel(audioState);
    } else if ("next" === target.name) {
        HtmlAppContainer.children[AudioSelectedIdx].setAttribute("data-selected", "0");
        if (AudioSelectedIdx === AudioList.len - 1) {
            AudioSelectedIdx = 0;
        } else {
            AudioSelectedIdx += 1;
        }
        const audioState = AudioList.get(AudioSelectedIdx);
        assert(audioState !== undefined, "ERROR: AudioList.get not found audio")
        HtmlAppContainer.children[AudioSelectedIdx].setAttribute("data-selected", "1");
        changeHtmlAppPanel(audioState);
    }
};

const HtmlAppPanelOninput = function (e) {
    assert(AudioSelectedIdx !== -1, "ERROR: Panel Bad Open");

    const target = e.target;
    if ("volume-input" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        if (target.valueAsNumber < LIMIT_VOLUME_MIN) {
            target.valueAsNumber = LIMIT_VOLUME_MIN;
        } else if (target.valueAsNumber > LIMIT_VOLUME_MAX) {
            target.valueAsNumber = LIMIT_VOLUME_MAX;
        } else {
            state.input.gain.value = target.valueAsNumber / 10;
            state.volume = target.valueAsNumber;
            target.nextElementSibling.textContent = `${state.volume * 10}%`;
        }

    } else if ("delay" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        state.delayDisabled = !target.checked;
        if (DelayAreAllDisable && target.checked) {
            DelayAreAllDisable = false;
            HtmlCDelayDA.checked = false;
        }

    } else if ("filter" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        state.filterDisabled = !target.checked;
        if (FilterAreAllDisable && target.checked) {
            FilterAreAllDisable = false;
            HtmlCFilterDA.checked = false;
        }

    } else if ("panner" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        state.pannerDisabled = !target.checked;
        if (PannerAreAllDisable && target.checked) {
            PannerAreAllDisable = false;
            HtmlCPannerDA.checked = false;
        }

    } else if ("pbrate" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        state.pbrateDisabled = !target.checked;
        if (PbRateAreAllDisable && target.checked) {
            PbRateAreAllDisable = false;
            HtmlCPbrateDA.checked = false;
        }

    } else if ("rsp" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        state.rspDisabled = !target.checked;
        if (CutRSPAreAllDisable && target.checked) {
            CutRSPAreAllDisable = false;
            HtmlCRSPDA.checked = false;
        }

    } else if ("rep" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        state.repDisabled = !target.checked;
        if (CutREPAreAllDisable && target.checked) {
            CutREPAreAllDisable = false;
            HtmlCREPDA.checked = false;
        }

    } else if ("start-time-input" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        let startTime = (state.duration * target.valueAsNumber) / 100;
        let translate = target.value;

        if (startTime + 0.5 >= state.endTime) {
            startTime = state.endTime - 0.5
            let value = ((state.endTime - 0.5) * 100) / state.duration;
            translate = String(value);
            target.valueAsNumber = value;

        }
        state.startTime = startTime;
        HtmlPStartTimeBar.setAttribute("style", "--translate:"+translate+"%");
        HtmlPStartTimeText.textContent = durationToTime(String(startTime));

    } else if ("end-time-input" === target.name) {
        const state = AudioList.get(AudioSelectedIdx);
        assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");
        let endTime = (state.duration * target.valueAsNumber) / 100;
        let translate = target.value;
        if (state.startTime >= endTime - 0.5) {
            endTime = state.startTime + 0.5;
            let value = ((state.startTime + 0.5) * 100) / state.duration;
            translate = String(value);
            target.valueAsNumber = value;
        }

        state.endTime = endTime;
        HtmlPEndTimeBar.setAttribute("style", "--translate:"+translate+"%");
        HtmlPEndTimeText.textContent = durationToTime(String(endTime));
    }
}

const BodyOnkeyup = function (e) {
    if (e.key === "s") {
        HtmlAppMenu
            .firstElementChild
            .firstElementChild
            .click();
    } else if (e.key === "a") {
        HtmlAppMenu
            .children[1]
            .firstElementChild
            .firstElementChild
            .click();
    } else if (e.key === "d") {
        HtmlAppMenu
            .children[2]
            .firstElementChild
            .click();
    }
};

const initBodyOnkeydown = function (e) {
    const target = e.target;
    if ("button" !== target.localName
        && "a" !== target.localName
        && "Enter" === e.key
    ) {
        const HtmlPresOpen = document.getElementById("presentation-open");
        HtmlPresOpen.click();
    }
};



 
const checkAppVersion = function (v) {
    let res = true;
    if (localStorage.getItem("version") !== v) {
        localStorage.clear();
        localStorage.setItem("version", v);
        res = false;
    }
    return res;
};

const HtmlPresOpenOnclick = function () {
    document.body.removeEventListener("keydown", initBodyOnkeydown);

    HtmlApp?.parentElement.firstElementChild.remove();
    HtmlApp.removeAttribute("data-css-hidden");

    
    context = new AudioContext({
        latencyHint: "playback",
        sampleRate: 44100
    });
    context?.resume();
    if (context.listener.positionX !== undefined) {
        context.listener.positionX.value = 0;
        context.listener.positionY.value = 0;
        context.listener.positionZ.value = 1;
        context.listener.forwardZ.value = -5;
    } else {
        context.listener.setPosition(0, 0, 1);
        context.listener.setOrientation(0, 0, -5, 0 ,1, 0);
    }

    return openApp();
};
const HtmlVolumeOnwheel = function (e) {
    const name = e.target.getAttribute("name");
    let input; e.target.parentElement.children["volume-input"];
    if (name === "volume-input" || name === "volume-text") {
        
        input = e.target.parentElement.children["volume-input"];
    } else if (name === "volume") {
        
        input = e.target.children["volume-input"];
    } else {
        return;
    }

    const state = AudioList.get(AudioSelectedIdx);
    assert(state !== undefined, "ERROR undefined state: AudioList.get on AudioSelectedIdx");

    if (e.deltaY > 0) {
        if (state.volume - 1 < LIMIT_VOLUME_MIN) {
            return;
        }
        state.volume -= 1;
    } else {
        if (state.volume + 1 > LIMIT_VOLUME_MAX) {
            return;
        }
        state.volume += 1;
    }
    input.valueAsNumber = state.volume;
    input.nextElementSibling.textContent = `${state.volume * 10}%`;
    state.input.gain.value = state.volume / 10;
};

const setHtmlAppConfiguration = function () {
    HtmlCDelayDA.checked = DelayAreAllDisable;
    HtmlCDelayTimemin.children["delay-timemin"].valueAsNumber = DelayTimemin;
    HtmlCDelayTimemin.lastElementChild.children["value"].textContent = (
        getDelayTime(DelayTimemin).toFixed(1)
    );
    HtmlCDelayTimemax.children["delay-timemax"].valueAsNumber = (
        LIMIT_DELAY_TIMEMAX - DelayTimemax
    );
    HtmlCDelayTimemax.lastElementChild.children["value"].textContent = (
        getDelayTime(DelayTimemax).toFixed(1)
    );
    HtmlCDelayFeedbackmin.children["delay-feedbackmin"].valueAsNumber = (
        DelayFeedbackmin
    );
    HtmlCDelayFeedbackmin.lastElementChild.children["value"].textContent = String(
        getDelayFeedback(DelayFeedbackmin)
    );
    HtmlCDelayFeedbackmax.children["delay-feedbackmax"].valueAsNumber = (
        LIMIT_DELAY_FEEDBACKMAX - DelayFeedbackmax
    );
    HtmlCDelayFeedbackmax.lastElementChild.children["value"].textContent = String(
        getDelayFeedback(DelayFeedbackmax)
    );

    HtmlCFadein.firstElementChild.valueAsNumber = FadeIn;
    HtmlCFadein.lastElementChild.children["value"].textContent = String(
        getFade(FadeIn)
    );
    HtmlCFadeout.firstElementChild.valueAsNumber = FadeOut;
    HtmlCFadeout.lastElementChild.children["value"].textContent = String(
        getFade(FadeOut)
    );

    HtmlCFilterDA.checked = FilterAreAllDisable;
    HtmlCFilterFreqmin.children["filter-freqmin"].valueAsNumber = (
        FilterFreqmin
    );
    HtmlCFilterFreqmin.lastElementChild.children["value"].textContent = String(
        getFilterFreq(FilterFreqmin)
    );
    HtmlCFilterFreqmax.children["filter-freqmax"].valueAsNumber = (
        LIMIT_FILTER_FREQMAX - FilterFreqmax
    );
    HtmlCFilterFreqmax.lastElementChild.children["value"].textContent = String(
        getFilterFreq(FilterFreqmax)
    );
    HtmlCFilterQmin.children["filter-qmin"].valueAsNumber = FilterQmin;
    HtmlCFilterQmin.lastElementChild.children["value"].textContent = String(
        getFilterQ(FilterQmin)
    );
    HtmlCFilterQmax.children["filter-qmax"].valueAsNumber = (
        LIMIT_FILTER_QMAX - FilterQmax
    );
    HtmlCFilterQmax.lastElementChild.children["value"].textContent = String(
        getFilterQ(FilterQmax)
    );
    let elements = HtmlCFilterEffects.elements;
    elements["filter-bandpass"].checked = FilterBandpass;
    elements["filter-highpass"].checked = FilterHighpass;
    elements["filter-lowpass"].checked = FilterLowpass;
    elements["filter-notch"].checked = FilterNotch;

    HtmlCPannerDA.checked = PannerAreAllDisable;
    HtmlCPannerXmin.children["panner-xmin"].valueAsNumber = PannerXmin;
    HtmlCPannerXmin.lastElementChild.children["value"].textContent = String(
        getPanner(PannerXmin)
    );
    HtmlCPannerXmax.children["panner-xmax"].valueAsNumber = (
        LIMIT_PANNER_MAX - PannerXmax
    );
    HtmlCPannerXmax.lastElementChild.children["value"].textContent = String(
        getPanner(PannerXmax)
    );
    HtmlCPannerYmin.children["panner-ymin"].valueAsNumber = PannerYmin;
    HtmlCPannerYmin.lastElementChild.children["value"].textContent = String(
        getPanner(PannerYmin)
    );
    HtmlCPannerYmax.children["panner-ymax"].valueAsNumber = (
        LIMIT_PANNER_MAX - PannerYmax
    );
    HtmlCPannerYmax.lastElementChild.children["value"].textContent = String(
        getPanner(PannerYmax)
    );
    HtmlCPannerZmin.children["panner-zmin"].valueAsNumber = PannerZmin;
    HtmlCPannerZmin.lastElementChild.children["value"].textContent = String(
        PannerZmin
    );
    HtmlCPannerZmax.children["panner-zmax"].valueAsNumber = (
        LIMIT_PANNER_ZMAX - PannerZmax
    );
    HtmlCPannerZmax.lastElementChild.children["value"].textContent = String(
        PannerZmax
    );

    HtmlCPbrateDA.checked = PbRateAreAllDisable;
    HtmlCPbrateMin.children["pbrate-min"].valueAsNumber = DEFAULT_PBRATE_MIN;
    HtmlCPbrateMin.lastElementChild.children["value"].textContent = (
        getPlaybackRate(DEFAULT_PBRATE_MIN).toFixed(2)
    );
    HtmlCPbrateMax.children["pbrate-max"].valueAsNumber = (
        LIMIT_PBRATE_MAX - DEFAULT_PBRATE_MAX
    );
    HtmlCPbrateMax.lastElementChild.children["value"].textContent = (
        getPlaybackRate(DEFAULT_PBRATE_MAX).toFixed(2)
    );

    HtmlCRSPDA.checked = CutRSPAreAllDisable;
    HtmlCREPDA.checked = CutREPAreAllDisable;

    HtmlCTimemaxUpdate(TimeIntervalmax);
    HtmlCTimeminUpdate(TimeIntervalmin);

    for (let i = 0; i < AudioList.len; i += 1) {
        const state = AudioList.get(i);
        state.delayDisabled = DelayAreAllDisable;
        state.filterDisabled = FilterAreAllDisable;
        state.pannerDisabled = PannerAreAllDisable;
        state.pbrateDisabled = PbRateAreAllDisable;
        state.rspDisabled = CutRSPAreAllDisable;
        state.repDisabled = CutREPAreAllDisable;
    }
    if (SelectedAudios !== -1) {
        changeHtmlAppPanelEffect("delay", !DelayAreAllDisable);
        changeHtmlAppPanelEffect("filter", !FilterAreAllDisable);
        changeHtmlAppPanelEffect("panner", !PannerAreAllDisable);
        changeHtmlAppPanelEffect("pbrate", !PbRateAreAllDisable);
        changeHtmlAppPanelEffect("rsp", !CutRSPAreAllDisable);
        changeHtmlAppPanelEffect("rep", !CutREPAreAllDisable);
    }
};

 
const localStorageInit = function (appVersion) {
    const s = localStorage;
    if (s[STORAGE_VERSION] !== appVersion) {
        s.setItem(STORAGE_VERSION, appVersion);

        
        const localSKeys = Object.keys(s);
        for (let key of localSKeys) {
            if (!key.startsWith("inset.", 0)) {
                s.removeItem(key);
            }
        }
    }
    let t = "";
    t = s[STORAGE_CREP_DISABLE];
    if (t === "0" || t === "1") {
        CutREPAreAllDisable = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_CREP_DISABLE, String(Number(CutREPAreAllDisable)));
    }
    t = s[STORAGE_CRSP_DISABLE];
    if (t === "0" || t === "1") {
        CutRSPAreAllDisable = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_CRSP_DISABLE, String(Number(CutRSPAreAllDisable)));
    }

    t = s[STORAGE_DELAY_DISABLE];
    if (t === "0" || t === "1") {
        DelayAreAllDisable = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_DELAY_DISABLE, String(Number(DelayAreAllDisable)));
    }

    let maxs = s[STORAGE_DELAY_TIMEMAX];
    let mins = s[STORAGE_DELAY_TIMEMIN];
    let maxn = Number(maxs);
    let minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_DELAY_TIMEMAX) {
        DelayTimemax = maxn;
        DelayTimemin = minn;
    } else {
        s.setItem(STORAGE_DELAY_TIMEMAX, String(DelayTimemax));
        s.setItem(STORAGE_DELAY_TIMEMIN, String(DelayTimemin));
    }

    maxs = s[STORAGE_DELAY_FEEDBACKMAX];
    mins = s[STORAGE_DELAY_FEEDBACKMIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_DELAY_FEEDBACKMAX) {
        DelayTimemax = maxn;
        DelayTimemin = minn;
    } else {
        s.setItem(STORAGE_DELAY_FEEDBACKMAX, String(DelayFeedbackmax));
        s.setItem(STORAGE_DELAY_FEEDBACKMIN, String(DelayFeedbackmin));
    }

    maxs = s[STORAGE_FADEIN];
    maxn = Number(maxs);
    if (LIMIT_MIN <= maxn && maxn <= LIMIT_FADES_MAX) {
        FadeIn = maxn;
    } else {
        s.setItem(STORAGE_FADEIN, String(FadeIn));
    }

    maxs = s[STORAGE_FADEOUT];
    maxn = Number(maxs);
    if (LIMIT_MIN <= maxn && maxn <= LIMIT_FADES_MAX) {
        FadeOut = maxn;
    } else {
        s.setItem(STORAGE_FADEOUT, String(FadeOut));
    }

    t = s[STORAGE_FILTER_DISABLE];
    if (t === "0" || t === "1") {
        FilterAreAllDisable = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_FILTER_DISABLE, String(Number(FilterAreAllDisable)));
    }

    maxs = s[STORAGE_FILTER_FREQMAX];
    mins = s[STORAGE_FILTER_FREQMIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_FILTER_FREQMAX) {
        FilterFreqmax = maxn;
        FilterFreqmin = minn;
    } else {
        s.setItem(STORAGE_FILTER_FREQMAX, String(FilterFreqmax));
        s.setItem(STORAGE_FILTER_FREQMIN, String(FilterFreqmin));
    }

    maxs = s[STORAGE_FILTER_QMAX];
    mins = s[STORAGE_FILTER_QMIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_FILTER_QMAX) {
        FilterQmax = maxn;
        FilterQmin = minn;
    } else {
        s.setItem(STORAGE_FILTER_QMAX, String(FilterQmax));
        s.setItem(STORAGE_FILTER_QMIN, String(FilterQmin));
    }

    t = s[STORAGE_FILTER_BANDPASS];
    if (t === "0" || t === "1") {
        FilterBandpass = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_FILTER_BANDPASS, String(Number(FilterBandpass)));
    }
    t = s[STORAGE_FILTER_HIGHPASS];
    if (t === "0" || t === "1") {
        FilterHighpass = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_FILTER_HIGHPASS, String(Number(FilterHighpass)));
    }
    t = s[STORAGE_FILTER_LOWPASS];
    if (t === "0" || t === "1") {
        FilterLowpass = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_FILTER_LOWPASS, String(Number(FilterLowpass)));
    }
    t = s[STORAGE_FILTER_NOTCH];
    if (t === "0" || t === "1") {
        FilterNotch = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_FILTER_NOTCH, String(Number(FilterNotch)));
    }


    t = s[STORAGE_PANNER_DISABLE];
    if (t === "0" || t === "1") {
        PannerAreAllDisable = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_PANNER_DISABLE, String(Number(PannerAreAllDisable)));
    }

    maxs = s[STORAGE_PANNER_XMAX];
    mins = s[STORAGE_PANNER_XMIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_MAX) {
        PannerXmax = maxn;
        PannerXmin = minn;
    } else {
        s.setItem(STORAGE_PANNER_XMAX, String(PannerXmax));
        s.setItem(STORAGE_PANNER_XMIN, String(PannerXmin));
    }

    maxs = s[STORAGE_PANNER_YMAX];
    mins = s[STORAGE_PANNER_YMIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_MAX) {
        PannerYmax = maxn;
        PannerYmin = minn;
    } else {
        s.setItem(STORAGE_PANNER_YMAX, String(PannerYmax));
        s.setItem(STORAGE_PANNER_YMIN, String(PannerYmin));
    }

    maxs = s[STORAGE_PANNER_ZMAX];
    mins = s[STORAGE_PANNER_ZMIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_ZMAX) {
        PannerZmax = maxn;
        PannerZmin = minn;
    } else {
        s.setItem(STORAGE_PANNER_ZMAX, String(PannerZmax));
        s.setItem(STORAGE_PANNER_ZMIN, String(PannerZmin));
    }

    t = s[STORAGE_PBRATE_DISABLE];
    if (t === "0" || t === "1") {
        PbRateAreAllDisable = Boolean(Number(t));
    } else {
        s.setItem(STORAGE_PBRATE_DISABLE, String(Number(PbRateAreAllDisable)));
    }

    maxs = s[STORAGE_PBRATE_MAX];
    mins = s[STORAGE_PBRATE_MIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_MAX) {
        PbRatemax = maxn;
        PbRatemin = minn;
    } else {
        s.setItem(STORAGE_PBRATE_MAX, String(PbRatemax));
        s.setItem(STORAGE_PBRATE_MIN, String(PbRatemin));
    }

    maxs = s[STORAGE_TIME_MAX];
    mins = s[STORAGE_TIME_MIN];
    maxn = Number(maxs);
    minn = Number(mins);
    if (LIMIT_TIMEINTERVAL_MIN <= mins
        && minn <= maxn
        && maxn <= LIMIT_TIMEINTERVAL_MAX
    ) {
        TimeIntervalmax = maxn;
        TimeIntervalmin = minn;
    } else {
        s.setItem(STORAGE_TIME_MAX, String(TimeIntervalmax));
        s.setItem(STORAGE_TIME_MIN, String(TimeIntervalmin));
    }
};
const loadConfigFile = function () {
    const text = Reader.result;
    
    const json = JSON.parse(text);
    let t = json[STORAGE_CRSP_DISABLE];
    if (t === "0" || t === "1") {
        localStorage.setItem(STORAGE_CRSP_DISABLE, t);
        CutRSPAreAllDisable = Boolean(Number(t));
    }
    t = json[STORAGE_CREP_DISABLE];
    if (t === "0" || t === "1") {
        localStorage.setItem(STORAGE_CREP_DISABLE, t);
        CutREPAreAllDisable = Boolean(Number(t));
    }

    t = json[STORAGE_DELAY_DISABLE];
    if (t === "0" || t === "1") {
        DelayAreAllDisable = Boolean(Number(t));
        localStorage.setItem(STORAGE_DELAY_DISABLE, t);
    }

    let maxn = 0;
    let minn = 0;
    let maxs = json[STORAGE_DELAY_TIMEMAX];
    let mins = json[STORAGE_DELAY_TIMEMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_DELAY_TIMEMAX) {
            DelayTimemax = maxn;
            DelayTimemin = minn;
            localStorage.setItem(STORAGE_DELAY_TIMEMAX, maxs);
            localStorage.setItem(STORAGE_DELAY_TIMEMIN, mins);
        }
    }

    maxs = json[STORAGE_DELAY_FEEDBACKMAX];
    mins = json[STORAGE_DELAY_FEEDBACKMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_DELAY_FEEDBACKMAX) {
            DelayTimemax = maxn;
            DelayTimemin = minn;
            localStorage.setItem(STORAGE_DELAY_FEEDBACKMAX, maxs);
            localStorage.setItem(STORAGE_DELAY_FEEDBACKMIN, mins);
        }
    }

    maxs = json[STORAGE_FADEIN];
    if (maxs !== undefined) {
        maxn = Number(maxs);
        if (LIMIT_MIN <= maxn && maxn <= LIMIT_FADES_MAX) {
            FadeIn = maxn;
            localStorage.setItem(STORAGE_FADEIN, maxs);
        }
    }

    maxs = json[STORAGE_FADEOUT];
    if (maxs !== undefined) {
        maxn = Number(maxs);
        if (LIMIT_MIN <= maxn && maxn <= LIMIT_FADES_MAX) {
            FadeOut = maxn;
            localStorage.setItem(STORAGE_FADEOUT, maxs);
        }
    }

    t = json[STORAGE_FILTER_DISABLE];
    if (t === "0" || t === "1") {
        FilterAreAllDisable = Boolean(Number(t));
        localStorage.setItem(STORAGE_FILTER_DISABLE, t);
    }

    maxs = json[STORAGE_FILTER_FREQMAX];
    mins = json[STORAGE_FILTER_FREQMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_FILTER_FREQMAX) {
            FilterFreqmax = maxn;
            FilterFreqmin = minn;
            localStorage.setItem(STORAGE_FILTER_FREQMAX, maxs);
            localStorage.setItem(STORAGE_FILTER_FREQMIN, mins);
        }
    }

    maxs = json[STORAGE_FILTER_QMAX];
    mins = json[STORAGE_FILTER_QMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_FILTER_QMAX) {
            FilterQmax = maxn;
            FilterQmin = minn;
            localStorage.setItem(STORAGE_FILTER_QMAX, maxs);
            localStorage.setItem(STORAGE_FILTER_QMIN, mins);
        }
    }
    t = json[STORAGE_FILTER_BANDPASS];
    if (t === "0" || t === "1") {
        FilterBandpass = Boolean(Number(t));
        localStorage.setItem(STORAGE_FILTER_BANDPASS, t);
    }
    t = json[STORAGE_FILTER_HIGHPASS];
    if (t === "0" || t === "1") {
        FilterHighpass = Boolean(Number(t));
        localStorage.setItem(STORAGE_FILTER_HIGHPASS, t);
    }
    t = json[STORAGE_FILTER_LOWPASS];
    if (t === "0" || t === "1") {
        FilterLowpass = Boolean(Number(t));
        localStorage.setItem(STORAGE_FILTER_LOWPASS, t);
    }
    t = json[STORAGE_FILTER_NOTCH];
    if (t === "0" || t === "1") {
        FilterNotch = Boolean(Number(t));
        localStorage.setItem(STORAGE_FILTER_NOTCH, t);
    }

    t = json[STORAGE_PANNER_DISABLE];
    if (t === "0" || t === "1") {
        PannerAreAllDisable = Boolean(Number(t));
        localStorage.setItem(STORAGE_PANNER_DISABLE, t);
    }
    maxs = json[STORAGE_PANNER_XMAX];
    mins = json[STORAGE_PANNER_XMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_MAX) {
            PannerXmax = maxn;
            PannerXmin = minn;
            localStorage.setItem(STORAGE_PANNER_XMAX, maxs);
            localStorage.setItem(STORAGE_PANNER_XMIN, mins);
        }
    }

    maxs = json[STORAGE_PANNER_YMAX];
    mins = json[STORAGE_PANNER_YMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_MAX) {
            PannerYmax = maxn;
            PannerYmin = minn;
            localStorage.setItem(STORAGE_PANNER_YMAX, maxs);
            localStorage.setItem(STORAGE_PANNER_YMIN, mins);
        }
    }

    maxs = json[STORAGE_PANNER_ZMAX];
    mins = json[STORAGE_PANNER_ZMIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_ZMAX) {
            PannerZmax = maxn;
            PannerZmin = minn;
            localStorage.setItem(STORAGE_PANNER_ZMAX, maxs);
            localStorage.setItem(STORAGE_PANNER_ZMIN, mins);
        }
    }

    t = json[STORAGE_PBRATE_DISABLE];
    if (t === "0" || t === "1") {
        PbRateAreAllDisable = Boolean(Number(t));
        localStorage.setItem(STORAGE_PBRATE_DISABLE, t);
    }
    maxs = json[STORAGE_PBRATE_MAX];
    mins = json[STORAGE_PBRATE_MIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_MIN <= mins && minn <= maxn && maxn <= LIMIT_PANNER_MAX) {
            PbRatemax = maxn;
            PbRatemin = minn;
            localStorage.setItem(STORAGE_PBRATE_MAX, maxs);
            localStorage.setItem(STORAGE_PBRATE_MIN, mins);
        }
    }
    maxs = json[STORAGE_TIME_MAX];
    mins = json[STORAGE_TIME_MIN];
    if (maxs !== undefined && mins !== undefined) {
        maxn = Number(maxs);
        minn = Number(mins);
        if (LIMIT_TIMEINTERVAL_MIN <= mins
            && minn <= maxn
            && maxn <= LIMIT_TIMEINTERVAL_MAX
        ) {
            TimeIntervalmax = maxn;
            TimeIntervalmin = minn;
            localStorage.setItem(STORAGE_TIME_MAX, maxs);
            localStorage.setItem(STORAGE_TIME_MIN, mins);
        }
    }

    setHtmlAppConfiguration();
};

const openApp = function () {
    setHtmlAppConfiguration();

    document.body.addEventListener("keyup", BodyOnkeyup, true);

    
    HtmlApp.addEventListener("dragenter", function () {
        HtmlAppDrop.removeAttribute("data-css-hidden");
    }, true);

    HtmlAppDrop.addEventListener("dragleave", function () {
        HtmlAppDrop.setAttribute("data-css-hidden", "");
    }, true);


    HtmlAppDrop.addEventListener("dragover", function (e) {
        e.preventDefault();
    }, true);

    HtmlAppDrop.addEventListener("drop", function (e) {
        e.preventDefault();
        HtmlAppDrop.setAttribute("data-css-hidden", "");
        addFiles(e.dataTransfer.files);
    }, true);

    HtmlAppMenu.addEventListener("click", HtmlAppMenuOnclick, false);
    HtmlAppMenu.addEventListener("input", HtmlAppMenuOninput, false);

    HtmlAppConfig.addEventListener("click", HtmlAppConfigOnclick, false);
    HtmlAppConfig.addEventListener("input", HtmlAppConfigOninput, false);

    HtmlAppContainer.addEventListener("click", HtmlAppContainerOnclick, false);

    HtmlAppPanel.addEventListener("input", HtmlAppPanelOninput, false);
    HtmlAppPanel.addEventListener("click", HtmlAppPanelOnclick, false);
    HtmlPVolume.addEventListener("wheel", HtmlVolumeOnwheel, false);

    const prefersReduceMotion = window.matchMedia("(prefers-reduced-motion)");
    reduceMotion = prefersReduceMotion.matches;
    prefersReduceMotion.addEventListener("change", function (e) {
        reduceMotion = e.matches;
    });

    Reader.addEventListener("load", loadConfigFile, true);
};

const main = function () {
    

    const HtmlPresError = document.getElementById("presentation-error");
    assert(HtmlPresError !== null, "#presentation-error is not found", false);

    const HtmlPresOpen = document.getElementById("presentation-open");
    assert(HtmlPresOpen !== null, "#presentation-open is not found", false);

    const HtmlThemeSwitcher = document.getElementById("theme-switcher")
    assert(HtmlThemeSwitcher !== null, "#theme-switcher is not found", false);

    if (undefined === AudioContext) {
        HtmlPresOpen.setAttribute("data-css-hidden", "");
        HtmlPresError.removeAttribute("data-css-hidden");
    } else {
        
        HtmlPresOpen.addEventListener("click", HtmlPresOpenOnclick, EVENT_CO);
        document.body.addEventListener("keydown", initBodyOnkeydown, true);
    }
    switchTheme();
    HtmlThemeSwitcher.addEventListener("click", switchTheme, true);

    localStorageInit("dev-c-2025-03");
};
main();
</script>
        

        <template id="t-audio-element">
            <div class="audio"
                name="audio"
                data-playing="0"
                data-selected="0"
            >
                <div name="pin" class="pin button-icon">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        stroke="currentColor"
                        stroke-width="3"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon icon-selected"
                    >
                        <circle cx="12" cy="12" r="6"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="3"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon icon-playing"
                    >
                        <path d="M9 18V5l12-2v13"/>
                        <circle fill="currentColor" cx="6" cy="18" r="3"/>
                        <circle fill="currentColor" cx="18" cy="16" r="3"/>
                    </svg>
                </div>
                <button name="play"
                    class="button-icon"
                    type="button"
                >
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        stroke="currentColor"
                        stroke-width="3"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon lucide-play"
                    >
                        <polygon points="6 3 20 12 6 21 6 3"/>
                    </svg>
                    <p class="sr-only lucide-play">play</p>
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon lucide-pause"
                    >
                        <rect x="14" y="4" width="4" height="16" rx="1"/>
                        <rect x="6" y="4" width="4" height="16" rx="1"/>
                    </svg>
                    <p class="sr-only lucide-pause">pause</p>
                </button>
                <h3 name="title" class="title"></h3>
                <small name="probability"
                    class="probability"
                    title="probability"
                >
                    <span name="text"></span><span>%</span>
                </small>
                <button name="remove"
                    class="button-icon"
                    title="remove"
                    type="button"
                >
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="3"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon lucide-x"
                    >
                        <path d="M18 6 6 18"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
        </template>
    </head>
    <body>
        <header class="hidde-interactive">
            <h1>inSets Music Composition App</h1>
        </header>
        <main>
            <section class="presentation">
                <header>
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="120" height="120"
                        viewBox="0 0 120 120"
                        fill="currentColor"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon-insets"
                    >
                        <circle cx="60" cy="24" r="6"></circle>
                        <circle cx="42" cy="42" r="6"></circle>
                        <circle cx="60" cy="42" r="6"></circle>
                        <circle cx="78" cy="42" r="6"></circle>
                        <circle cx="24" cy="60" r="6"></circle>
                        <circle cx="78" cy="60" r="6"></circle>
                        <circle cx="96" cy="60" r="6"></circle>
                        <circle cx="42" cy="78" r="6"></circle>
                        <circle cx="60" cy="78" r="6"></circle>
                        <circle cx="60" cy="96" r="6"></circle>
                    </svg>
                    <button id="presentation-open" class="button-text">
                        <h2>Open inSets</h2>
                    </button>
                </header>
                <div id="presentation-error" data-css-hidden>
                    <h2>ERROR: Sorry we have a problem</h2>
                    <p>Your browser does NOT have AudioContext🎵 support!!!</p>
                    <p>and because of that, we CAN NOT run the app 😭</p>
                    <p>Please, use any other actualized browser</p>
                </div>
                <noscript>
                    <p>This page requires Javascript</p>
                    <p>Enable Javascript or use any other browser</p>
                </noscript>
                <a href=""
                    class="button-icon-text"
                    target="_blank"
                    rel="noreferrer noopener"
                    aria-label="how to used"
                >
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon lucide-info"
                    >
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4"/>
                        <path d="M12 8h.01"/>
                    </svg>
                    <span>how to</span>
                </a>
                <p>inSets Music Composition</p>
                <p>by Axel Ariel Saravia</p>
                <p>
                    <a href="https://github.com/AxelArielSaravia/"
                        class="button-icon-text"
                        target="_blank"
                        rel="noreferrer noopener"
                        aria-label="github repository"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg"
                            width="24" height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="icon lucide-github"
                        >
                            <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
                            <path d="M9 18c-4.51 2-5-2-7-2"/>
                        </svg>
                        <span>github</span>
                    </a>
                </p>
                <button type="button"
                    class="theme-switcher button-icon-text"
                    id="theme-switcher"
                    aria-label="theme switcher"
                >
                    <p class="sr-only">Theme switcher</p>
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="icon lucide-sun"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <circle cx="12" cy="12" r="4"/>
                        <path d="M12 2v2"/>
                        <path d="M12 20v2"/>
                        <path d="m4.93 4.93 1.41 1.41"/>
                        <path d="m17.66 17.66 1.41 1.41"/>
                        <path d="M2 12h2"/>
                        <path d="M20 12h2"/>
                        <path d="m6.34 17.66-1.41 1.41"/>
                        <path d="m19.07 4.93-1.41 1.41"/>
                    </svg>
                    <span class="lucide-sun">light</span>
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="icon lucide-moon"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                    </svg>
                    <span class="lucide-moon">dark</span>
                </button>
            </section>
            <div class="app" id="app" data-css-hidden>
                <menu class="menu" id ="app-menu">
                    <li>
                        <button class="b-start button-text button-icon-text"
                            name="start"
                            data-start="0"
                            type="button"
                            autofocus
                        >
                            <svg xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke-width="2"
                                stroke="currentColor"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="start icon lucide-power"
                            >
                                <path d="M12 2v10"/>
                                <path d="M18.4 6.6a9 9 0 1 1-12.77.04"/>
                            </svg>
                            <span class="start">Start</span>
                            <svg xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="end icon lucide-power-off"
                            >
                                <path d="M18.36 6.64A9 9 0 0 1 20.77 15"/>
                                <path d="M6.16 6.16a9 9 0 1 0 12.68 12.68"/>
                                <path d="M12 2v4"/>
                                <path d="m2 2 20 20"/>
                            </svg>
                            <span class="end">End</span>
                        </button>
                    </li>
                    <li>
                        <label class="b-file">
                            <input type="file"
                                class="hidde-interactive"
                                name="file"
                                accept="audio/*"
                                multiple
                            >
                            <span class="button button-icon-text">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-file-audio"
                                >
                                    <path d="M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"/>
                                    <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
                                    <path d="M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0"/>
                                </svg>
                                <span>Add</span>
                            </span>
                        </label>
                    </li>
                    <li>
                        <button
                            class="b-clear button-icon-text"
                            name="clear"
                            type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon lucide-trash-2"
                            >
                                <path d="M3 6h18"/>
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                <line x1="10" x2="10" y1="11" y2="17"/>
                                <line x1="14" x2="14" y1="11" y2="17"/>
                            </svg>
                            <span>clear</span>
                        </button>
                    </li>
                    <li class="b-config">
                        <label class="checkbox">
                            <input type="checkbox"
                                id="b-config"
                                name="config"
                                class="hidde-interactive"
                            >
                            <span class="button button-icon-text">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-settings-2"
                                >
                                    <path d="M20 7h-9"/>
                                    <path d="M14 17H5"/>
                                    <circle cx="17" cy="17" r="3"/>
                                    <circle cx="7" cy="7" r="3"/>
                                </svg>
                                <span>config</span>
                            </span>
                        </label>
                    </li>
                </menu>
                <section id="app-panel"
                    class="panel"
                    data-display="0"
                    data-playing="0"
                >
                    <h3 class="title" name="title" id="p-title"></h3>
                    <div class="module-playback">
                        <div name="playback">
                            <div name="time-text" class="time-text">
                                <p name="start-time" id="p-start-time-text"></p>
                                <p name="end-time" id="p-end-time-text"></p>
                            </div>
                            <div name="ranges" class="ranges">
                                <input type="range"
                                    name="start-time-input"
                                    class="time-input start-time-input"
                                    id="p-start-time-input"
                                    min="0"
                                    max="100"
                                    value="0"
                                    step="0.1"
                                >
                                <div name="bars" class="bars">
                                    <div name="current"
                                        class="current"
                                        id="p-current-bar"
                                    ></div>
                                    <div name="start-point"
                                        class="start-point"
                                        id="p-start-point-bar"
                                    ></div>
                                    <div name="end-point"
                                        class="end-point"
                                        id="p-end-point-bar"
                                    ></div>
                                    <div name="start-time"
                                        class="start-time"
                                        id="p-start-time-bar"
                                    ></div>
                                    <div name="end-time"
                                        class="end-time"
                                        id="p-end-time-bar"
                                    ></div>
                                </div>
                                <input type="range"
                                    name="end-time-input"
                                    id="p-end-time-input"
                                    class="time-input end-time-input"
                                    min="0"
                                    max="100"
                                    value="100"
                                    step="0.1"
                                >
                            </div>
                            <p name="current-text"
                                class="current-text"
                                id="p-current-text"
                            ></p>
                        </div>
                        <div name="controls"
                            id="p-controls"
                            data-scroll="0"
                        >
                            <button name="prev"
                                class="prev button-icon"
                                type="button"
                                title="prev audio"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-chevron-left"
                                >
                                    <path d="m15 18-6-6 6-6"/>
                                </svg>
                                <span class="hidde-interactive">previous audio</span>
                            </button>
                            <button name="play"
                                class="button-icon"
                                type="button"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="3"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-play"
                                >
                                    <polygon points="6 3 20 12 6 21 6 3"/>
                                </svg>
                                <p class="sr-only lucide-play">play</p>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-pause"
                                >
                                    <rect x="14" y="4" width="4" height="16" rx="1"/>
                                    <rect x="6" y="4" width="4" height="16" rx="1"/>
                                </svg>
                                <p class="sr-only lucide-pause">pause</p>
                            </button>
                            <button name="next"
                                class="next button-icon"
                                type="button"
                                title="next audio"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-chevron-right"
                                >
                                    <path d="m9 18 6-6-6-6"/>
                                </svg>
                                <span class="hidde-interactive">next audio</span>
                            </button>
                        </div>
                    </div>
                    <div class="module-options">
                        <label class="volume" name="volume" id="p-volume">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon lucide-volume-2"
                            >
                                <path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"/>
                                <path d="M16 9a5 5 0 0 1 0 6"/>
                                <path d="M19.364 18.364a9 9 0 0 0 0-12.728"/>
                            </svg>
                            <input type="range"
                                id="p-volume-input"
                                min="0"
                                max="15"
                                step="1"
                                value="8"
                                name="volume-input"
                            >
                            <span name="volume-text"
                                id="p-volume-text"
                            >80%</span>
                        </label>
                        <section name="probability">
                            <h4>Probability</h4>
                            <div class="scroll-buttons">
                                <button class="left button-icon" name="p-left">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon lucide-triangle"
                                    >
                                        <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                    </svg>
                                </button>
                                <p name="value" id="p-probability-value">1</p>
                                <button class="right button-icon" name="p-right">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon lucide-triangle"
                                    >
                                        <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                    </svg>
                                </button>
                                <span name="text"
                                    id="p-probability-text"
                                >100.00%</span>
                            </div>
                        </section>
                        <fieldset name="effects"
                            class="checkboxes"
                            id="p-effects"
                        >
                            <label class="checkbox" name="delay">
                                <input type="checkbox"
                                    name="delay"
                                    class="hidde-interactive"
                                    checked
                                >
                                <span class="button button-icon-text">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon-checkbox lucide-square"
                                    >
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    </svg>
                                    <span>Delay</span>
                                </span>
                            </label>
                            <label class="checkbox" name="filter">
                                <input type="checkbox"
                                    name="filter"
                                    class="hidde-interactive"
                                    checked
                                >
                                <span class="button button-icon-text">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon-checkbox lucide-square"
                                    >
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    </svg>
                                    <span>Filter</span>
                                </span>
                            </label>
                            <label class="checkbox" name="panner">
                                <input type="checkbox"
                                    name="panner"
                                    class="hidde-interactive"
                                    checked
                                >
                                <span class="button button-icon-text">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon-checkbox lucide-square"
                                    >
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    </svg>
                                    <span>Panner</span>
                                </span>
                            </label>
                            <label class="checkbox" name="pbrate">
                                <input type="checkbox"
                                    name="pbrate"
                                    class="hidde-interactive"
                                    checked
                                >
                                <span class="button button-icon-text">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon-checkbox lucide-square"
                                    >
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    </svg>
                                    <span>Pb Rate</span>
                                </span>
                            </label>
                            <label class="checkbox" name="rsp">
                                <input type="checkbox"
                                    name="rsp"
                                    class="hidde-interactive"
                                    checked
                                >
                                <span class="button button-icon-text">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon-checkbox lucide-square"
                                    >
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    </svg>
                                    <span>RSP</span>
                                </span>
                            </label>
                            <label class="checkbox" name="rep">
                                <input type="checkbox"
                                    name="rep"
                                    class="hidde-interactive"
                                    checked
                                >
                                <span class="button button-icon-text">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon-checkbox lucide-square"
                                    >
                                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    </svg>
                                    <span>REP</span>
                                </span>
                            </label>
                        </fieldset>
                    </div>
                    <button name="close"
                        class="button-icon"
                        title="close panel"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg"
                            width="24" height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="icon lucide-arrow-down-from-line"
                        >
                            <path d="M19 3H5"/>
                            <path d="M12 21V7"/>
                            <path d="m6 15 6 6 6-6"/>
                        </svg>
                    </button>
                </section>
                <div id="app-container" class="audio-container"></div>
                <section id="app-config" class="configuration" data-show="0">
                    <menu>
                        <li>
                            <label class="button button-icon-text"
                                title="Import JSON configuration"
                            >
                                <input
                                    name="import"
                                    type="file"
                                    accept="application/json"
                                    class="hidde-interactive"
                                >
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-download"
                                >
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" x2="12" y1="15" y2="3"/>
                                </svg>
                                <span>import</span>
                            </label>
                        </li>
                        <li>
                            <a name="export"
                                class="button button-icon-text"
                                title="Export JSON configuration"
                                href=""
                                download="insets_config.json"
                                type="application/json"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-upload"
                                >
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" x2="12" y1="3" y2="15"/>
                                </svg>
                                <span>export</span>
                            </a>
                        </li>
                        <li>
                            <button type="button"
                                name="theme-switcher"
                                class="theme-switcher button-icon-text"
                                aria-label="theme switcher"
                            >
                                <p class="sr-only">Theme switcher</p>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="icon lucide-sun"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <circle cx="12" cy="12" r="4"/>
                                    <path d="M12 2v2"/>
                                    <path d="M12 20v2"/>
                                    <path d="m4.93 4.93 1.41 1.41"/>
                                    <path d="m17.66 17.66 1.41 1.41"/>
                                    <path d="M2 12h2"/>
                                    <path d="M20 12h2"/>
                                    <path d="m6.34 17.66-1.41 1.41"/>
                                    <path d="m19.07 4.93-1.41 1.41"/>
                                </svg>
                                <span class="lucide-sun">light</span>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="icon lucide-moon"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                >
                                    <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                                </svg>
                                <span class="lucide-moon">dark</span>
                            </button>
                        </li>
                    </menu>
                    <h2>Configuration</h2>
                    <div class="effects">
                        <details class="sets"
                            id="c-set-details"
                            data-elements="0"
                        >
                            <summary
                                title="Here are the probability values of audios sets sizes for the executions. The maximum size of a set that can be executed is 15"
                            >
                                <h3>Sets</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-buttons">
                                <label class="max-elements">
                                    <input type="checkbox"
                                        name="elements-checkbox"
                                        class="hidde-interactive"
                                    >
                                    <span>Max elements</span>
                                    <span id="c-max-elements">15</span>
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        width="24" height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon lucide-chevron-down-icon lucide-chevron-down"
                                    >
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </label>
                                <button name="set-reset">reset</button>
                            </div>
                            <div class="elements-radios"
                                id="c-set-radios"
                            >
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="1"
                                        class="hidde-interactive"
                                    >
                                    <span>1</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="2"
                                        class="hidde-interactive"
                                    >
                                    <span>2</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="3"
                                        class="hidde-interactive"
                                    >
                                    <span>3</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="4"
                                        class="hidde-interactive"
                                    >
                                    <span>4</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="5"
                                        class="hidde-interactive"
                                    >
                                    <span>5</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="6"
                                        class="hidde-interactive"
                                    >
                                    <span>6</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="7"
                                        class="hidde-interactive"
                                    >
                                    <span>7</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="8"
                                        class="hidde-interactive"
                                    >
                                    <span>8</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="9"
                                        class="hidde-interactive"
                                    >
                                    <span>9</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="10"
                                        class="hidde-interactive"
                                    >
                                    <span>10</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="11"
                                        class="hidde-interactive"
                                    >
                                    <span>11</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="12"
                                        class="hidde-interactive"
                                    >
                                    <span>12</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="13"
                                        class="hidde-interactive"
                                    >
                                    <span>13</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="14"
                                        class="hidde-interactive"
                                    >
                                    <span>14</span>
                                </label>
                                <label class="radio">
                                    <input type="radio"
                                        name="elements-radio"
                                        value="15"
                                        class="hidde-interactive"
                                        checked
                                    >
                                    <span>15</span>
                                </label>
                            </div>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Elements</th>
                                        <th>Value</th>
                                        <th>Probability</th>
                                    </tr>
                                </thead>
                                <tbody id="c-sets">
                                    <tr name="set-0">
                                        <th class="elements">0</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100.0</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-1" data-display="0">
                                        <th class="elements">1</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-2" data-display="0">
                                        <th class="elements">2</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-3" data-display="0">
                                        <th class="elements">3</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-4" data-display="0">
                                        <th class="elements">4</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-5" data-display="0">
                                        <th class="elements">5</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-6" data-display="0">
                                        <th class="elements">6</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-7" data-display="0">
                                        <th class="elements">7</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-8" data-display="0">
                                        <th class="elements">8</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-9" data-display="0">
                                        <th class="elements">9</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-10" data-display="0">
                                        <th class="elements">10</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-11" data-display="0">
                                        <th class="elements">11</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-12" data-display="0">
                                        <th class="elements">12</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-13" data-display="0">
                                        <th class="elements">13</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-14" data-display="0">
                                        <th class="elements">14</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                    <tr name="set-15" data-display="0">
                                        <th class="elements">15</th>
                                        <th class="scroll-buttons">
                                            <button class="left button-icon" name="set-left">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">1</p>
                                            <button class="right button-icon" name="set-right">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </th>
                                        <th class="probability">
                                            <span name="value">100</span>
                                            <span>%</span>
                                        </th>
                                    </tr>
                                </tbody>
                            </table>
                        </details>
                        <details class="time"
                            title="This is an interval that represents the time to wait between executions of audios set"
                        >
                            <summary>
                                <h3>Time</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-button">
                                <button name="time-reset">reset</button>
                            </div>
                            <div class="content" data-changed="0">
                                <span class="eg">mm:ss.ms</span>
                                <article>
                                    <h4>max</h4>
                                    <div class="time-input"
                                        id="c-time-max"
                                    >
                                        <div class="range-number" name="mm">
                                            <button class="up button-icon"
                                                name="time-max-mm-up"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">00</p>
                                            <button class="down button-icon"
                                                name="time-max-mm-down"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <p>:</p>
                                        <div class="range-number" name="ss">
                                            <button class="up button-icon"
                                                name="time-max-ss-up"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">05</p>
                                            <button class="down button-icon"
                                                name="time-max-ss-down"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <p>.</p>
                                        <div class="range-number" name="ms">
                                            <button class="up button-icon"
                                                name="time-max-ms-up"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">0</p>
                                            <button class="down button-icon"
                                                name="time-max-ms-down"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </article>
                                <article>
                                    <h4>min</h4>
                                    <div class="time-input"
                                        id="c-time-min"
                                    >
                                        <div class="range-number" name="mm">
                                            <button class="up button-icon"
                                                name="time-min-mm-up"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">00</p>
                                            <button class="down button-icon"
                                                name="time-min-mm-down"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <p>:</p>
                                        <div class="range-number" name="ss">
                                            <button class="up button-icon"
                                                name="time-min-ss-up"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">00</p>
                                            <button class="down button-icon"
                                                name="time-min-ss-down"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                        <p>.</p>
                                        <div class="range-number" name="ms">
                                            <button class="up button-icon"
                                                name="time-min-ms-up"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                            <p name="value">8</p>
                                            <button class="down button-icon"
                                                name="time-min-ms-down"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    width="24" height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    stroke="currentColor"
                                                    stroke-width="2"
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    class="icon lucide-triangle"
                                                >
                                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </article>
                                <menu>
                                    <button name="time-cancel"
                                        class="button-text"
                                    >
                                        cancel
                                    </button>
                                    <button name="time-apply"
                                        class="button-text"
                                    >
                                        apply
                                    </button>
                                </menu>
                            </div>
                        </details>
                        <details class="fades"
                            title="Change the fadeIn and fadeOut values for all audios"
                        >
                            <summary>
                                <h3>Fades</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-button">
                                <button name="fades-reset">reset</button>
                            </div>
                            <article>
                                <h4>fadein</h4>
                                <div id="c-fadein" class="range">
                                    <input name="fadein"
                                        type="range"
                                        min="0"
                                        max="8"
                                        value="2"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">100</span>
                                        <span>ms</span>
                                    </span>
                                </div>
                            </article>
                            <article>
                                <h4>fadeout</h4>
                                <div id="c-fadeout" class="range">
                                    <input name="fadeout"
                                        type="range"
                                        min="0"
                                        max="8"
                                        value="5"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">160</span>
                                        <span>ms</span>
                                    </span>
                                </div>
                            </article>
                        </details>
                        <details class="delay"
                            title="Change the delay configurations"
                        >
                            <summary>
                                <h3>Delay</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-buttons">
                                <label class="checkbox">
                                    <input type="checkbox"
                                        id="c-delay-da"
                                        name="delay-da"
                                        class="hidde-interactive"
                                    >
                                    <span class="button button-icon-text">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            width="24" height="24"
                                            viewBox="0 0 24 24"
                                            fill="currentColor"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            class="icon-checkbox lucide-square"
                                        >
                                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                                        </svg>
                                        <span>disable for all</span>
                                    </span>
                                </label>
                                <button name="delay-reset">reset</button>
                            </div>
                            <article>
                                <h4>time interval</h4>
                                <div id="c-delay-timemin" class="range">
                                    <span class="title">min</span>
                                    <input name="delay-timemin"
                                        type="range"
                                        min="0"
                                        max="49"
                                        value="3"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">0.4</span>
                                        <span>sec</span>
                                    </span>
                                </div>
                                <div id="c-delay-timemax" class="range">
                                    <span class="title">max</span>
                                    <input name="delay-timemax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="49"
                                        value="10"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">4.0</span>
                                        <span>sec</span>
                                    </span>
                                </div>
                            </article>
                            <article>
                                <h4>feedback interval</h4>
                                <div id="c-delay-feedbackmin" class="range">
                                    <span class="title">min</span>
                                    <input name="delay-feedbackmin"
                                        type="range"
                                        min="0"
                                        max="17"
                                        value="4"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">25</span>
                                        <span>%</span>
                                    </span>
                                </div>
                                <div id="c-delay-feedbackmax" class="range">
                                    <span class="title">max</span>
                                    <input name="delay-feedbackmax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="17"
                                        value="1"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">85</span>
                                        <span>%</span>
                                    </span>
                                </div>
                            </article>
                        </details>
                        <details class="filter"
                            title="Change the general parameters of different filters"
                        >
                            <summary>
                                <h3>Filter</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-buttons">
                                <label class="checkbox">
                                    <input name="filter-da"
                                        type="checkbox"
                                        id="c-filter-da"
                                        class="hidde-interactive"
                                    >
                                    <span class="button button-icon-text">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            width="24" height="24"
                                            viewBox="0 0 24 24"
                                            fill="currentColor"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            class="icon-checkbox lucide-square"
                                        >
                                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                                        </svg>
                                        <span>disable for all</span>
                                    </span>
                                </label>
                                <button name="filter-reset">reset</button>
                            </div>
                            <article>
                                <h4>frequency interval</h4>
                                <div id="c-filter-freqmin" class="range">
                                    <span class="title">min</span>
                                    <input name="filter-freqmin"
                                        type="range"
                                        min="0"
                                        max="248"
                                        value="40"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">80</span>
                                        <span>hz</span>
                                    </span>
                                </div>
                                <div id="c-filter-freqmax" class="range">
                                    <span class="title">max</span>
                                    <input name="filter-freqmax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="248"
                                        value="8"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">10000</span>
                                        <span>hz</span>
                                    </span>
                                </div>
                            </article>
                            <article>
                                <h4>q factor interval</h4>
                                <div id="c-filter-qmin" class="range">
                                    <span class="title">min</span>
                                    <input name="filter-qmin"
                                        type="range"
                                        min="0"
                                        max="36"
                                        value="0"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">0.1</span>
                                    </span>
                                </div>
                                <div id="c-filter-qmax" class="range">
                                    <span class="title">max</span>
                                    <input name="filter-qmax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="36"
                                        value="0"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">10</span>
                                    </span>
                                </div>
                            </article>
                            <article>
                                <h4>filter effects selected</h4>
                                <fieldset class="checkboxes" id="c-filter-effects">
                                    <label class="checkbox">
                                        <input type="checkbox"
                                            name="filter-highpass"
                                            class="hidde-interactive"
                                            checked
                                        >
                                        <span class="button button-icon-text">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24"
                                                viewBox="0 0 24 24"
                                                fill="currentColor"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="icon-checkbox lucide-square"
                                            >
                                                <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            </svg>
                                            <span>highpass</span>
                                        </span>
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox"
                                            name="filter-lowpass"
                                            class="hidde-interactive"
                                            checked
                                        >
                                        <span class="button button-icon-text">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24"
                                                viewBox="0 0 24 24"
                                                fill="currentColor"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="icon-checkbox lucide-square"
                                            >
                                                <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            </svg>
                                            <span>lowpass</span>
                                        </span>
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox"
                                            name="filter-bandpass"
                                            class="hidde-interactive"
                                            checked
                                        >
                                        <span class="button button-icon-text">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24"
                                                viewBox="0 0 24 24"
                                                fill="currentColor"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="icon-checkbox lucide-square"
                                            >
                                                <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            </svg>
                                            <span>bandpass</span>
                                        </span>
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox"
                                            name="filter-notch"
                                            class="hidde-interactive"
                                            checked
                                        >
                                        <span class="button button-icon-text">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24"
                                                viewBox="0 0 24 24"
                                                fill="currentColor"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="icon-checkbox lucide-square"
                                            >
                                                <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            </svg>
                                            <span>notch</span>
                                        </span>
                                    </label>
                                </fieldset>
                            </article>
                        </details>
                        <details class="panner"
                            title="Change the intervals that represents a position of the audio in a right-hand Cartesian coordinate system"
                        >
                            <summary>
                                <h3>Panner</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-buttons">
                                <label class="checkbox">
                                    <input type="checkbox"
                                        id="c-panner-da"
                                        name="panner-da"
                                        class="hidde-interactive"
                                    >
                                    <span class="button button-icon-text">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            width="24" height="24"
                                            viewBox="0 0 24 24"
                                            fill="currentColor"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            class="icon-checkbox lucide-square"
                                        >
                                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                                        </svg>
                                        <span>disable for all</span>
                                    </span>
                                </label>
                                <button name="panner-reset">reset</button>
                            </div>
                            <article>
                                <h4>x interval</h4>
                                <div id="c-panner-xmin" class="range">
                                    <span class="title">min</span>
                                    <input name="panner-xmin"
                                        type="range"
                                        min="0"
                                        max="100"
                                        value="20"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">-30</span>
                                        <span>%</span>
                                    </span>
                                </div>
                                <div id="c-panner-xmax" class="range">
                                    <span class="title">max</span>
                                    <input name="panner-xmax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="100"
                                        value="20"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">30</span>
                                        <span>%</span>
                                    </span>
                                </div>
                            </article>
                            <article>
                                <h4>y interval</h4>
                                <div id="c-panner-ymin" class="range">
                                    <span class="title">min</span>
                                    <input name="panner-ymin"
                                        type="range"
                                        min="0"
                                        max="100"
                                        value="20"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">-30</span>
                                        <span>%</span>
                                    </span>
                                </div>
                                <div id="c-panner-ymax" class="range">
                                    <span class="title">max</span>
                                    <input name="panner-ymax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="100"
                                        value="20"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">30</span>
                                        <span>%</span>
                                    </span>
                                </div>
                            </article>
                            <article>
                                <h4>z interval</h4>
                                <div id="c-panner-zmin" class="range">
                                    <span class="title">min</span>
                                    <input name="panner-zmin"
                                        type="range"
                                        min="0"
                                        max="50"
                                        value="0"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">0</span>
                                        <span>%</span>
                                    </span>
                                </div>
                                <div id="c-panner-zmax" class="range">
                                    <span class="title">max</span>
                                    <input name="panner-zmax"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="50"
                                        value="0"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">50</span>
                                        <span>%</span>
                                    </span>
                                </div>
                            </article>
                        </details>
                        <details class="pbrate"
                            title="The normal playback rate is multiplied by a random value inside the interval to obtain the current playback rate"
                        >
                            <summary>
                                <h3>Pb Rate</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <div class="general-buttons">
                                <label class="checkbox">
                                    <input type="checkbox"
                                        id="c-pbrate-da"
                                        name="pbrate-da"
                                        class="hidde-interactive"
                                    >
                                    <span class="button button-icon-text">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            width="24" height="24"
                                            viewBox="0 0 24 24"
                                            fill="currentColor"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            class="icon-checkbox lucide-square"
                                        >
                                            <rect width="18" height="18" x="3" y="3" rx="2"/>
                                        </svg>
                                        <span>disable for all</span>
                                    </span>
                                </label>
                                <button name="pbrate-reset">reset</button>
                            </div>
                            <article>
                                <h4>interval</h4>
                                <div id="c-pbrate-min" class="range">
                                    <span class="title">min</span>
                                    <input name="pbrate-min"
                                        type="range"
                                        min="0"
                                        max="20"
                                        value="5"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">0.75</span>
                                    </span>
                                </div>
                                <div id="c-pbrate-max" class="range">
                                    <span class="title">max</span>
                                    <input name="pbrate-max"
                                        class="reverse"
                                        dir="rtl"
                                        type="range"
                                        min="0"
                                        max="20"
                                        value="5"
                                        step="1"
                                    >
                                    <span class="text">
                                        <span name="value">1.50</span>
                                    </span>
                                </div>
                            </article>
                        </details>
                        <details class="cuts"
                            title="Enable and disable the random cut effect for the start point and the end point"
                        >
                            <summary>
                                <h3>Cuts</h3>
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="icon lucide-triangle"
                                >
                                    <path d="M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                                </svg>
                            </summary>
                            <article>
                                <h4>RSP random start point</h4>
                                <div class="general-buttons">
                                    <label class="checkbox">
                                        <input type="checkbox"
                                            id="c-rsp-da"
                                            name="rsp-da"
                                            class="hidde-interactive"
                                        >
                                        <span class="button button-icon-text">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24"
                                                viewBox="0 0 24 24"
                                                fill="currentColor"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="icon-checkbox lucide-square"
                                            >
                                                <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            </svg>
                                            <span>disable for all</span>
                                        </span>
                                    </label>
                                </div>
                            </article>
                            <article>
                                <h4>REP random end point</h4>
                                <div class="general-buttons">
                                    <label class="checkbox">
                                        <input type="checkbox"
                                            id="c-rep-da"
                                            name="rep-da"
                                            class="hidde-interactive"
                                        >
                                        <span class="button button-icon-text">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24"
                                                viewBox="0 0 24 24"
                                                fill="currentColor"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="icon-checkbox lucide-square"
                                            >
                                                <rect width="18" height="18" x="3" y="3" rx="2"/>
                                            </svg>
                                            <span>disable for all</span>
                                        </span>
                                    </label>
                                </div>
                            </article>
                        </details>
                </section>
            </div>
                <div id="app-drop" class="drop-area" data-css-hidden>
                    <svg xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon lucide-file-audio"
                    >
                        <path d="M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"/>
                        <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
                        <path d="M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0"/>
                    </svg>
                    <p>Drop files</p>
                </div>
            </div>
        </main>
    </body>
</html>
